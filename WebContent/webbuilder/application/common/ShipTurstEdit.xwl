<?xml version="1.0" encoding="utf-8"?>
<body name="body" class="sys_normal" caption="航次委托维护" needLogin="false" extLastScript="shipGridstore.baseParams.WhereSql =&quot;  AND SHIP_STAT_ID= '0' AND AGENCY_ID='1'&quot;;&#xA;shipGridstore.load({params:{start:0,limit:30}});&#xA;shipStatusText.setText(&quot;当前状态：预抵&quot;);&#xA;shipStatus.setText(&quot;预抵&quot;);" headerScript="var rowIn=0;">
	<folder name="storeFolder"><extStore name="portStore" url="main?action=webbuilder/application/ship/common/portSelect.xwl"/><extStore name="cargoStore" url="main?action=webbuilder/application/ship/common/cargoSelect.xwl"/><extStore name="vesselStore" url="main?action=webbuilder/application/ship/common/vesselSelect.xwl"/><extStore name="lineStore" url="main?action=webbuilder/application/ship/common/arealineSelect.xwl"/><extStore name="countryStore" url="main?action=webbuilder/application/ship/common/countrySelect.xwl"/><extStore name="trustStore" url="main?action=webbuilder/application/ship/common/trustSelect.xwl"/><extAjax out="grid" onSuccess="alert(&quot;成功&quot;);shipGridstore.reload();" onFailure="alert(&quot;失败&quot;);" name="deleteRequest" url="main?action=webbuilder/application/ship/shipwork/ShipEditShipDelete.xwl"/><extAjax out="grid_ship_wy" onSuccess="alert(&quot;成功&quot;);trustGridStore.reload();" onFailure="alert(&quot;失败&quot;);" name="deleteRequestTrust" url="main?action=webbuilder/application/ship/shipwork/delete/ShipTrustDelete.xwl"/><extAjax out="grid_ship_cntr" onSuccess="alert(&quot;成功&quot;);trustCargoGridStore.reload();" onFailure="alert(&quot;失败&quot;);" name="deleteRequestTrustCargo" url="main?action=webbuilder/application/ship/shipwork/delete/ShipTrustCargoDelete.xwl"/><extAjax out="grid_ship_crew" onSuccess="alert(&quot;成功&quot;);trustGuestGridStore.reload();" onFailure="alert(&quot;失败&quot;);" name="deleteRequestTrustCrew" url="main?action=webbuilder/application/ship/shipwork/delete/ShipTrustCrewDelete.xwl"/><extAjax url="main?action=webbuilder/application/ship/shipwork/ShipEditShipSave.xwl" out="extForm" onSuccess="alert(&quot;保存成功！&quot;);shipGridstore.reload();" onFailure="alert(&quot;保存失败&quot;);" name="updateAjax"/><extAjax out="extWindow_Trust" onSuccess="alert(&quot;保存成功！&quot;);trustGridStore.reload();" onFailure="alert(&quot;保存失败&quot;);" name="updateRequestTrust" url="main?action=webbuilder/application/ship/shipwork/ShipEditShipTrustSave.xwl"/><extAjax out="extWindow_Cargo,OLD_PORT_ID" onSuccess="alert(&quot;保存成功！&quot;);trustCargoGridStore.reload();" onFailure="alert(&quot;保存失败&quot;);" name="updateRequestTrustCargo" url="main?action=webbuilder/application/ship/common/formRequestUpdate.xwl"/><extAjax url="main?action=webbuilder/application/ship/common/formRequestInsert.xwl" onSuccess="alert(&quot;保存成功！&quot;);trustGridStore.reload();" onFailure="alert(&quot;保存失败&quot;);" name="insertRequestTrust" out="extWindow_Trust"/><extAjax url="main?action=webbuilder/application/ship/common/formRequestInsert.xwl" onSuccess="alert(&quot;保存成功！&quot;);trustCargoGridStore.reload();" onFailure="alert(&quot;保存失败&quot;);" name="insertRequestTrustCargo" out="extWindow_Cargo"/><extAjax url="main?action=webbuilder/application/ship/common/formRequestInsert.xwl" onSuccess="alert(&quot;保存成功！&quot;);trustGuestGridStore.reload();" onFailure="alert(&quot;保存失败&quot;);" name="insertRequestTrustGuest" out="extWindow_Crew"/><extAjax out="extWindow_Crew" onSuccess="alert(&quot;保存成功！&quot;);trustGuestGridStore.reload();" onFailure="alert(&quot;保存失败&quot;);" name="updateRequestTrustGuest" url="main?action=webbuilder/application/ship/common/formRequestUpdate.xwl"/><extStore name="shipGridstore" url="main?action=webbuilder/application/ship/shipwork/ShipEditShipGridStore.xwl" onAfterLoad="grid.getSelectionModel().selectRow(rowIn);&#xA;&#xA;var record = grid.getSelectionModel().getSelected();&#xA;	extSetAllControlsValueObj(extForm, record.data);&#xA;        trustGridStore.load({params:{WhereSql:&quot; WHERE SHIP_NO='&quot;+record.get(&quot;SHIP_NO&quot;)+&quot;'&quot;}});&#xA;        trustCargoGridStore.load({params:{WhereSql:&quot; WHERE SHIP_NO='&quot;+record.get(&quot;SHIP_NO&quot;)+&quot;'&quot;}});&#xA;        trustGuestGridStore.load({params:{WhereSql:&quot; WHERE SHIP_NO='&quot;+record.get(&quot;SHIP_NO&quot;)+&quot;'&quot;}});"/><extStore name="trustGridStore" url="main?action=webbuilder/application/ship/shipwork/ShipEditTrustGridStore.xwl"/><extStore name="trustCargoGridStore" url="main?action=webbuilder/application/ship/shipwork/ShipEditTrustCargoGridStore.xwl"/><extStore name="trustGuestGridStore" url="main?action=webbuilder/application/ship/shipwork/ShipEditTrustGuestGridStore.xwl"/><extStore name="workPlaceStore" url="main?action=webbuilder/application/ship/common/workPlaceCodSelect.xwl"/></folder><folder name="ExtScriptFolder"><extScript name="extScript" header="var t3 = '';&#xA;function strSplit(_str){&#xA;	if(_str.indexOf(&quot;(&quot;) &gt; 0 )  &#xA;	{&#xA;		var strArray1 = _str.split(&quot;(&quot;)&#xA;		if (strArray1.length &gt; 1 )&#xA;		{&#xA;			if(strArray1[1].indexOf(&quot;)&quot;) &gt; 0 )  &#xA;			{&#xA;			   var strArray2 = strArray1[1].split(&quot;)&quot;)&#xA;			   if(strArray2[0].indexOf(&quot;-&quot;) &gt; 0 )&#xA;			   {&#xA;				var strArray3 = strArray2[0].split(&quot;-&quot;)&#xA;				return strArray3;&#xA;			   }&#xA;			}&#xA;		}&#xA;	}	&#xA;	return _str;&#xA;}&#xA;&#xA;function strSplitChar(_str,_char){&#xA;	if(_str.indexOf(&quot;(&quot;) &gt; 0 )  &#xA;	{&#xA;		var strArray1 = _str.split(&quot;(&quot;)&#xA;		if (strArray1.length &gt; 1 )&#xA;		{&#xA;			if(strArray1[1].indexOf(&quot;)&quot;) &gt; 0 )  &#xA;			{&#xA;			   var strArray2 = strArray1[1].split(&quot;)&quot;)&#xA;			   if(strArray2[0].indexOf(_char) &gt; 0 )&#xA;			   {&#xA;				var strArray3 = strArray2[0].split(_char)&#xA;				return strArray3;&#xA;			   }&#xA;			}&#xA;		}&#xA;	}	&#xA;	return _str;&#xA;}"/></folder><folder name="columnModelFolder"><extColumnModel name="columnMode_Ship"><extScript name="extScript1" extHeader="new Ext.grid.CheckboxSelectionModel()"/><extColumn caption="英文船名" fieldName="E_SHIP_NAM" name="E_SHIP_NAMc" align="left" width="100"/><extColumn caption="中文船名" fieldName="C_SHIP_NAM" name="C_SHIP_NAMc" align="left"/><extColumn caption="进口航次" fieldName="IN_VOYAGE_NO" name="IN_VOYAGE_NOc" align="left" width="60"/><extColumn caption="出口航次" fieldName="OUT_VOYAGE_NO" name="OUT_VOYAGE_NOc" align="left" width="60"/><extColumn caption="预抵时间" fieldName="ETA_TIM" name="ETA_TIMc" align="left" width="120" renderer="return value.format('Y-m-d H:i');" type="datetime"/><extColumn caption="预离时间" fieldName="ETD_TIM" name="ETD_TIMc" align="left" width="120" type="datetime" renderer="return value.format('Y-m-d H:i');"/><extColumn caption="航线名称" fieldName="LINE_NAM" name="LINE_NAMc" align="left" width="60"/><extColumn caption="预抵位置" fieldName="ETA_PLACE_STR" name="ETA_PLACE_STRc" align="left"/><extColumn fieldName="TRADE_ID" name="TRADE_IDc" caption="内贸？" align="left" renderer="if(value=='1'){return '内贸';}&#xA;else if(value=='0'){return '外贸';}" width="40"/><extColumn caption="船舶档案号" fieldName="SHIP_ARCH_NBR" name="SHIP_ARCH_NBRc" align="left"/><extColumn caption="船舶海关码" fieldName="SHIP_CUSTOM_NBR" name="SHIP_CUSTOM_NBRc" align="left"/><extColumn caption="船舶海事局编号" fieldName="SHIP_MSA_NBR" name="SHIP_MSA_NBRc" align="left"/><extColumn caption="船舶编号" fieldName="SHIP_NO" name="SHIP_NOc" align="left"/></extColumnModel><extColumnModel name="columnModel_Trust"><extScript name="extScript2" extHeader="new Ext.grid.CheckboxSelectionModel()"/><extColumn caption="委托方代码" fieldName="TRUST_COD" name="TRUST_CODc" align="left" width="80"/><extColumn caption="委托方英文名" fieldName="E_TRUST_NAM" name="E_TRUST_NAMc" align="left" width="100"/><extColumn caption="委托方类型" fieldName="TRUST_TYP_ID" name="TRUST_TYP_IDc" renderer="if(value=='1'){return '第一委托方';}else if(value=='2'){return '第二委托方';}else if(value=='0'){return '船东';}" width="100"/><extColumn caption="付款方式" fieldName="PAY_MOD_ID" name="PAY_MOD_IDc" renderer="if(value=='1'){return '备用金';}&#xA;else if(value=='2'){return '余款';}&#xA;else if(value=='3'){return '索汇';}&#xA;else if(value=='4'){return '报账';}&#xA;else if(value=='9'){return '其它';}"/><extColumn caption="电话" fieldName="PHONE_NO" name="PHONE_NOc" align="left"/><extColumn caption="联系人" fieldName="RELET_NAM" name="RELET_NAMc" align="left"/><extColumn caption="Email" name="MAILc" align="left" fieldName="EMAIL"/><extColumn caption="备注" name="REMARK_TXTc" align="left" fieldName="REMARK_TXT"/><extColumn caption="录入员" fieldName="RECORD_MAN" name="RECORD_MANc" align="left"/><extColumn align="left" name="SHIP_NOCD" fieldName="SHIP_NO" caption="船号"/></extColumnModel><extColumnModel name="columnModel_Cargo"><extScript name="extScript3" extHeader="new Ext.grid.CheckboxSelectionModel()"/><extColumn caption="进出口" fieldName="PORT_ID" name="PORT_IDc" renderer="if(value=='1'){return '进口';}&#xA;else if(value=='0'){return '出口';}" width="45"/><extColumn caption="外贸" fieldName="TRADE_ID" name="TRADE_IDcc" renderer="if(value=='1'){return '内贸';}&#xA;else if(value=='0'){return '外贸';}" width="40"/><extColumn caption="危品" fieldName="DANGER_ID" name="DANGER_IDc" renderer="if(value=='1'){return '是';}&#xA;else if(value=='0'){return '否';}" width="40"/><extColumn caption="货名" fieldName="CARGO_COD" name="CAOGO_CODc"/><extColumn caption="中文货名" name="C_CARGO_NAMc" fieldName="C_CARGO_NAM"/><extColumn caption="英文货名" fieldName="E_CARGO_NAM" name="E_CARGO_NAMc"/><extColumn caption="重量（吨）" fieldName="TWEIGHT_TON" name="TWEIGHT_TONc"/><extColumn caption="20'E" fieldName="E20_NUM" name="E20_NUMc" width="40" align="right"/><extColumn caption="20'F" fieldName="F20_NUM" name="F20_NUMC" width="40" align="right"/><extColumn caption="40'E" fieldName="E40_NUM" name="E40_NUMc" width="40" align="right"/><extColumn caption="40'F" fieldName="F40_NUM" name="F40_NUMc" width="40" align="right"/><extColumn caption="45'E" fieldName="E45_NUM" name="E45_NUMc" width="40" align="right"/><extColumn caption="45'F" fieldName="F45_NUM" name="F45_NUMc" width="40" align="right"/><extColumn caption="备注" fieldName="REMARK_TXT" name="REMARK_TXTcc"/><extColumn caption="统计货类" fieldName="TCARGO_KIND_COD" name="TCARGO_KIND_CODc"/><extColumn caption="装卸条款" fieldName="LOAD_TERMS_COD" name="LOAD_TERMS_CODc"/><extColumn caption="货主" fieldName="E_OWNER_NAM" name="E_OWNER_NAMc"/></extColumnModel><extColumnModel name="columnModel_Crew"><extScript name="extScript31" extHeader="new Ext.grid.CheckboxSelectionModel()"/><extColumn caption="进出境" fieldName="PORT_ID" name="PORT_IDcc" renderer="if(value=='1'){return '进境';}&#xA;else if(value=='0'){return '出境';}" width="45"/><extColumn caption="船员/旅客" fieldName="GUEST_ATTR_ID" name="GUEST_ATTR_IDc" renderer="if(value=='S'){return '旅客';}&#xA;else if(value=='P'){return '船员';}" width="40"/><extColumn caption="国籍" fieldName="COUNTRY_COD" name="COUNTRY_CODc"/><extColumn caption="性别" fieldName="SEX_ID" name="SEX_IDc"/><extColumn caption="人数" fieldName="TRUST_NUM" name="TRUST_NUMc"/><extColumn caption="证书名称" fieldName="CERTIFICATE_NAM" name="CERTIFICATE_NAMc"/><extColumn caption="录入员" fieldName="RECORD_MAN" name="RECORD_MANcc"/><extColumn caption="录入时间" fieldName="RECORD_TIM" name="RECORD_TIMcc" type="datetime" renderer="return value.format('Y-m-d H:i');"/></extColumnModel></folder><folder name="Ship_Menu"><extMenu name="menu_ship_wy"><extMenuItem caption="增加" onClick="operateType = 'insert';&#xA;grid1=Ext.getCmp(&quot;grid&quot;);&#xA;if (grid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请首先选择航次记录。');&#xA;	return;&#xA;}else{&#xA;&#xA;var record = grid.getSelectionModel().getSelected();&#xA;extWindow_Trust.setTitle('新建 - 委托方');&#xA;extWindow_Trust.show();&#xA;extResetAllControlsValue(&quot;extWindow_Trust&quot;);&#xA;SHIP_NO_SHIP_TRUST=Ext.getCmp(&quot;SHIP_NO_SHIP_TRUST&quot;);&#xA;           SHIP_NO_SHIP_TRUST.setValue(record.get(&quot;SHIP_NO&quot;))&#xA;tableName_2=Ext.getCmp(&quot;tableName_2&quot;);&#xA;           tableName_2.setValue(&quot;SHIP_TRUST&quot;)&#xA;       }" iconCls="icon_new" name="Trust_new"/><extMenuItem caption="修改" iconCls="icon_edit" name="Trust_edit" onClick="operateType = 'modify';&#xA;grid_ship_wy=Ext.getCmp(&quot;grid_ship_wy&quot;);&#xA;if (grid_ship_wy.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一个有效的条目。');&#xA;	return;&#xA;}else{&#xA;	var record = grid_ship_wy.getSelectionModel().getSelected();&#xA;		extWindow_Trust.show();&#xA;	extSetAllControlsValueObj(extWindow_Trust, record.data);&#xA;&#xA;}"/><extMenuItem caption="删除" iconCls="icon_delete" enableToggle="true" name="Trust_delete" onClick="grid_ship_wy=Ext.getCmp(&quot;grid_ship_wy&quot;);&#xA;extGridDeleteConfirm(grid_ship_wy,&quot;TRUST_COD&quot;,function(){&#xA;	deleteRequestTrust();&#xA;});"/></extMenu><extMenu name="menu_Cargo"><extMenuItem caption="增加" onClick="operateType = 'insert';&#xA;grid1=Ext.getCmp(&quot;grid&quot;);&#xA;if (grid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请首先选择航次记录。');&#xA;	return;&#xA;}else{&#xA;	grid_ship_wy=Ext.getCmp(&quot;grid_ship_wy&quot;);&#xA;	if (grid_ship_wy.getSelectionModel().getSelections().length != 1)&#xA;	{&#xA;		extShowWarning('请首先选择委托方记录。');&#xA;		return;&#xA;	}&#xA;	else&#xA;	{&#xA;	    var recordWy = grid_ship_wy.getSelectionModel().getSelected();&#xA;		&#xA;		&#xA;		var record = grid.getSelectionModel().getSelected();&#xA;		extWindow_Cargo.setTitle('新建 - 委托货物');&#xA;		extWindow_Cargo.show();&#xA;		extResetAllControlsValue(&quot;extWindow_Cargo&quot;);&#xA;		SHIP_NO_TRUST_CARGO=Ext.getCmp(&quot;SHIP_NO_TRUST_CARGO&quot;);&#xA;		SHIP_NO_TRUST_CARGO.setValue(record.get(&quot;SHIP_NO&quot;));&#xA;		TRUST_COD_TRUST_CARGO=Ext.getCmp(&quot;TRUST_COD_TRUST_CARGO&quot;);&#xA;		TRUST_COD_TRUST_CARGO.setValue(recordWy.get(&quot;TRUST_COD&quot;));&#xA;		&#xA;		SHIP_TRUST_NO_TRUST_CARGO=Ext.getCmp(&quot;SHIP_TRUST_NO_TRUST_CARGO&quot;);&#xA;		SHIP_TRUST_NO_TRUST_CARGO.setValue(recordWy.get(&quot;SHIP_TRUST_NO&quot;));&#xA;                &#xA;                tableName_3=Ext.getCmp(&quot;tableName_3&quot;);&#xA;           tableName_3.setValue(&quot;TRUST_CARGO&quot;)&#xA;    }&#xA;&#xA;}" iconCls="icon_new" name="Cargo_new"/><extMenuItem caption="修改" iconCls="icon_edit" name="Cargo_edit" onClick="operateType = 'modify';&#xA;grid_ship_cntr=Ext.getCmp(&quot;grid_ship_cntr&quot;);&#xA;if (grid_ship_cntr.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一个有效的条目。');&#xA;	return;&#xA;}else{&#xA;	var record = grid_ship_cntr.getSelectionModel().getSelected();&#xA;		extWindow_Cargo.show();&#xA;	extSetAllControlsValueObj(extWindow_Cargo, record.data);&#xA;&#xA;}"/><extMenuItem caption="删除" iconCls="icon_delete" name="Cargo_delete" onClick="grid_ship_cntr=Ext.getCmp(&quot;grid_ship_cntr&quot;);&#xA;extGridDeleteConfirm(grid_ship_cntr,&quot;CARGO_COD&quot;,function(){&#xA;	deleteRequestTrustCargo();&#xA;});"/></extMenu><extMenu name="menu_Crew"><extMenuItem caption="增加" onClick="operateType = 'insert';&#xA;grid1=Ext.getCmp(&quot;grid&quot;);&#xA;if (grid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请首先选择航次记录。');&#xA;	return;&#xA;}&#xA;else{&#xA;		grid_ship_wy=Ext.getCmp(&quot;grid_ship_wy&quot;);&#xA;		if (grid_ship_wy.getSelectionModel().getSelections().length != 1)&#xA;		{&#xA;			extShowWarning('请首先选择委托方记录。');&#xA;			return;&#xA;		}&#xA;		else&#xA;		{&#xA;	        var recordWy = grid_ship_wy.getSelectionModel().getSelected();&#xA;			var record = grid.getSelectionModel().getSelected();&#xA;			extWindow_Crew.setTitle('新建 - 船员旅客');&#xA;			extWindow_Crew.show();&#xA;			extResetAllControlsValue(&quot;extWindow_Crew&quot;);&#xA;			SHIP_NO_TRUST_GUEST=Ext.getCmp(&quot;SHIP_NO_TRUST_GUEST&quot;);&#xA;                SHIP_NO_TRUST_GUEST.setValue(record.get(&quot;SHIP_NO&quot;));&#xA;			&#xA;			TRUST_COD_TRUST_GUEST=Ext.getCmp(&quot;TRUST_COD_TRUST_GUEST&quot;);&#xA;		    TRUST_COD_TRUST_GUEST.setValue(recordWy.get(&quot;TRUST_COD&quot;));&#xA;		&#xA;		    SHIP_TRUST_NO_TRUST_GUEST=Ext.getCmp(&quot;SHIP_TRUST_NO_TRUST_GUEST&quot;);&#xA;		    SHIP_TRUST_NO_TRUST_GUEST.setValue(recordWy.get(&quot;SHIP_TRUST_NO&quot;));&#xA;                     tableName_4=Ext.getCmp(&quot;tableName_4&quot;);&#xA;                     tableName_4.setValue(&quot;TRUST_GUEST&quot;)&#xA;RECORD_MAN_TRUST_GUEST=Ext.getCmp(&quot;RECORD_MAN_TRUST_GUEST&quot;);&#xA;                     RECORD_MAN_TRUST_GUEST.setValue('{#sys.username#}')&#xA;RECORD_TIM_TRUST_GUEST=Ext.getCmp(&quot;RECORD_TIM_TRUST_GUEST&quot;);&#xA;                     RECORD_TIM_TRUST_GUEST.setValue('{#sys.nowdate#}');&#xA;OLD_PORT_ID.setValue(&quot;1&quot;);&#xA;       }&#xA;   }" iconCls="icon_new" name="Crew_new"/><extMenuItem caption="修改" iconCls="icon_edit" name="Crew_edit" onClick="operateType = 'modify';&#xA;grid_ship_crew=Ext.getCmp(&quot;grid_ship_crew&quot;);&#xA;if (grid_ship_crew.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一个有效的条目。');&#xA;	return;&#xA;}else{&#xA;	var record = grid_ship_crew.getSelectionModel().getSelected();&#xA;		extWindow_Crew.show();&#xA;	extSetAllControlsValueObj(extWindow_Crew, record.data);&#xA;&#xA;}"/><extMenuItem caption="删除" iconCls="icon_delete" name="Crew_delete" onClick="grid_ship_crew=Ext.getCmp(&quot;grid_ship_crew&quot;);&#xA;extGridDeleteConfirm(grid_ship_crew,&quot;CERTIFICATE_NAM&quot;,function(){&#xA;	deleteRequestTrustCrew();&#xA;});"/></extMenu><extMenu name="menu_Ship"><extMenuItem name="shipNew" caption="新增" iconCls="icon_new" onClick="extResetForm(Ext.getCmp(&quot;extForm&quot;))&#xA;tableName=Ext.getCmp(&quot;tableName&quot;);&#xA;           tableName_2.setValue(&quot;SHIP&quot;);&#xA;AGENCY_ID.setValue(&quot;1&quot;);&#xA;TRADE_ID.setValue(&quot;0&quot;);&#xA;TL_ID.setValue(&quot;T&quot;);&#xA;RECORD_MAN.setValue('{#sys.username#}')&#xA;RECORD_TIM.setValue('{#sys.nowdate#}');"/><extMenuItem name="shipDelete" caption="删除" iconCls="icon_delete" onClick="grid=Ext.getCmp(&quot;grid&quot;);&#xA;extGridDeleteConfirm(grid,&quot;C_SHIP_NAM&quot;,function(){&#xA;	deleteRequest();&#xA;});"/><extMenuItem name="shipEdit" iconCls="icon_edit" onClick="if(SHIP_COD.getValue()==''){&#xA;	extShowMessage('船舶代码不能为空');&#xA;	return;&#xA;}&#xA;if(E_SHIP_NAM.getValue()==''){&#xA;	extShowMessage('英文船名不能为空');&#xA;	return;&#xA;}&#xA;&#xA;if(C_SHIP_NAM.getValue()==''){&#xA;	extShowMessage('中文船名不能为空');&#xA;	return;&#xA;}&#xA;&#xA;if(IN_VOYAGE_NO.getValue()==''){&#xA;	extShowMessage('进口航次不能为空');&#xA;	return;&#xA;}&#xA;&#xA;if(OUT_VOYAGE_NO.getValue()==''){&#xA;	extShowMessage('出口航次不能为空');&#xA;	return;&#xA;}&#xA;if(FIVE_VOYAGE_Y.getValue()==''){&#xA;	extShowMessage('五日船期强入标志不能为空');&#xA;	return;&#xA;}&#xA;&#xA;if(ETD_TIM.getValue()==''){&#xA;	extShowMessage('预离时间不能为空');&#xA;	return;&#xA;}&#xA;if(ETA_TIM.getValue()==''){&#xA;	extShowMessage('预抵时间不能为空');&#xA;	return;&#xA;}&#xA;if (ETD_TIM.getValue() &lt; ETA_TIM.getValue())&#xA;{&#xA;extShowMessage('预抵时间不能晚于预离时间！');&#xA;	return;&#xA;}&#xA;&#xA;rowIn=grid.store.indexOf(grid.getSelectionModel().getSelected());&#xA;updateAjax();" caption="保存"/><extMenuItem caption="-" menuType="fill" name="shipFill1"/><extMenuItem caption="状态" name="shipStatus" iconCls="icon_find"><extMenuItem name="statusYd" caption="预抵" onClick="shipGridstore.baseParams.WhereSql =&quot;  AND SHIP_STAT_ID= '0' AND AGENCY_ID='1'&quot;;&#xA;shipGridstore.load({params:{start:0,limit:30}});&#xA;shipStatusText.setText(&quot;当前状态：预抵&quot;);&#xA;shipStatus.setText(&quot;预抵&quot;);"/><extMenuItem caption="锚地" name="statusMd" onClick="shipGridstore.baseParams.WhereSql =&quot;  AND SHIP_STAT_ID= '1' AND AGENCY_ID='1'&quot;;&#xA;shipGridstore.load({params:{start:0,limit:30}});&#xA;shipStatusText.setText(&quot;当前状态：锚地&quot;);&#xA;shipStatus.setText(&quot;锚地&quot;);"/><extMenuItem caption="在泊" name="statusZb" onClick="shipGridstore.baseParams.WhereSql =&quot;  AND SHIP_STAT_ID= '2' AND AGENCY_ID='1'&quot;;&#xA;shipGridstore.load({params:{start:0,limit:30}});&#xA;shipStatusText.setText(&quot;当前状态：在泊&quot;);&#xA;shipStatus.setText(&quot;在泊&quot;);"/><extMenuItem caption="修船" name="statusXc" onClick="shipGridstore.baseParams.WhereSql =&quot;  AND SHIP_STAT_ID= '4' AND AGENCY_ID='1'&quot;;&#xA;shipGridstore.load({params:{start:0,limit:30}});&#xA;shipStatusText.setText(&quot;当前状态：修船&quot;);&#xA;shipStatus.setText(&quot;修船&quot;);"/><extMenuItem caption="离港" name="statusLg" onClick="function GetDateStr(AddDayCount) {&#xA;    var dd = new Date();&#xA;    dd.setDate(dd.getDate()+AddDayCount);//获取AddDayCount天后的日期&#xA;    var y = dd.getFullYear();&#xA;    var m = dd.getMonth()+1;//获取当前月份的日期&#xA;    var d = dd.getDate();&#xA;  if(m+0 &lt; 10 ) {m='0'+m;}&#xA;if(d+0 &lt; 10 ) {d='0'+d;}&#xA;    return y+&quot;-&quot;+m+&quot;-&quot;+d;&#xA;}&#xA;&#xA; shipStatusText.setText(&quot;当前状态：离港&quot;);&#xA;shipStatus.setText(&quot;离港&quot;);&#xA;var bgdate = GetDateStr(-30);&#xA;var eddate = GetDateStr(30);&#xA;shipGridstore.baseParams.WhereSql =&quot;  AND SHIP_STAT_ID= '3' AND AGENCY_ID='1'  AND ( TO_CHAR(ETA_TIM,'yyyy-mm-dd') &gt;= '&quot;+bgdate+&quot;' AND TO_CHAR(ETA_TIM,'yyyy-mm-dd') &lt;= '&quot;+eddate+&quot;')&quot;;&#xA;shipGridstore.load({params:{start:0,limit:30}});"/><extMenuItem caption="非我司" name="statusFws" onClick="shipGridstore.baseParams.WhereSql =&quot;  AND AGENCY_ID='0'&quot;;&#xA;shipGridstore.load({params:{start:0,limit:30}});&#xA;shipStatusText.setText(&quot;非我司船舶&quot;);&#xA;shipStatus.setText(&quot;非我司&quot;);"/></extMenuItem><extMenuItem caption="-" menuType="fill" name="shipFill2"/><extLabel caption="检索" name="shipMenuT1" hidden="true"/><extTextField name="shipMenuText" onFocus="control.setValue(control.getValue().toUpperCase());"/><extMenuItem name="menuItem2" caption="检索" onClick="shipGridstore.baseParams.WhereSql =&quot;  AND (SHIP.C_SHIP_NAM like '%&quot;+shipMenuText.getValue()+&quot;%' OR SHIP.E_SHIP_NAM like '%&quot;+shipMenuText.getValue()+&quot;%')&quot;;&#xA;shipGridstore.load({params:{start:0,limit:30}});"/><extMenuItem name="menuItem" caption="-" menuType="fill"/><extLabel color="#FF0000" name="shipStatusText" caption="当前状态："/><extMenuItem name="menuItem1" caption="船舶定位" onClick="grid1=Ext.getCmp(&quot;grid&quot;);&#xA;if (grid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请首先选择航次记录。');&#xA;	return;&#xA;}else{&#xA;var record = grid.getSelectionModel().getSelected();&#xA;var shipName = record.get(&quot;E_SHIP_NAM&quot;)+'';&#xA;window.open(&quot;http://www.chinaports.com/shiptracker/netmap.jsp?shipname=&quot;+shipName+&quot;&amp; username=shwqcbdlgs@shport&quot;);&#xA;&#xA;}" iconCls="icon_find"/></extMenu></folder><folder name="Ship_Window"><extWindow name="extWindow_Trust" closeAction="hide" frame="true" width="562" height="247" autoShow="false" layout="absolute" iconCls="icon_property" caption="委托人" onOk="if(TRUST_COD.getValue()==''){&#xA;	extShowMessage('委托方代码不能为空');&#xA;	return;&#xA;}&#xA;if(TRUST_TYP_ID.getValue()==''){&#xA;	extShowMessage('委托方类型不能为空');&#xA;	return;&#xA;}&#xA;if (operateType == 'modify')&#xA;{&#xA;	updateRequestTrust();&#xA;	&#xA;}else{&#xA;       updateRequestTrust();&#xA;	&#xA;}&#xA;extWindow_Trust.hide();"><extLabel name="extLabel38" left="10" top="10" width="85" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;委托方："/><extComboBox mode="local" left="105" width="155" name="TRUST_COD" store="trustStore" displayField="TRUST_COD" valueField="TRUST_COD" pageSize="20" listWidth="300" onSelect="var v = extGetComboValue(TRUST_COD);&#xA;{&#xA;control.setValue(strSplitChar(v,'*')[2]);&#xA;Ext.getCmp(&quot;E_TRUST_NAM&quot;).setValue(strSplitChar(v,'*')[1]);&#xA;}" mustSelection="false" forceSelection="true" typeAhead="true" allowBlank="false" onBlur="control.setValue(control.getEl().getValue().toUpperCase());" top="5" minChars="3"/><extTextField left="275" top="5" width="225" name="E_TRUST_NAM"/><extLabel name="extLabel39" left="15" top="40" width="80" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;委托方类型："/><extComboBox mode="local" left="105" top="35" width="155" name="TRUST_TYP_ID" mapKey="TRUST_TYP_ID" valueField="KEY_ID" displayField="KEY_TEXT" allowBlank="false"/><extLabel name="extLabel40" left="275" top="35" width="65" caption="付款方式："/><extComboBox mode="local" left="355" top="30" width="145" name="PAY_MOD_ID" mapKey="PAY_MOD_ID" displayField="KEY_TEXT" valueField="KEY_ID"/><extLabel name="extLabel41" left="40" top="70" width="55" caption="联系人：" align="right"/><extTextField left="105" top="65" width="395" name="RELET_NAM"/><extLabel name="extLabel42" left="30" top="100" width="65" caption="联系电话：" align="right"/><extTextField left="105" top="95" width="395" name="PHONE_NO"/><extLabel name="extLabel43" left="45" top="130" width="50" caption="Email：" align="right"/><extTextField left="105" top="125" width="395" name="EMAIL"/><extLabel name="extLabel44" left="50" top="160" width="45" caption="备注：" align="right"/><extTextField left="105" top="155" width="395" name="REMARK_TXT_SHIP_TRUST"/><extTextField left="10" top="190" width="90" name="OLD_SHIP_TRUST_NO" hidden="false"/><extTextField left="150" top="190" width="120" name="SHIP_NO_SHIP_TRUST" hidden="true"/><extTextField left="295" top="190" width="40" name="tableName_2" value="SHIP_TRUST" hidden="true"/><extTextField left="360" top="190" width="120" name="SHIP_TRUST_NO" hidden="true"/></extWindow><extWindow name="extWindow_Cargo" closeAction="hide" frame="true" width="704" height="247" layout="absolute" caption="委托货物" onOk="if(PORT_ID_TRUST_CARGO.getValue()==''){&#xA;	extShowMessage('进出口标志不能为空');&#xA;	return;&#xA;}&#xA;if(TRADE_ID_TRUST_CARGO.getValue()==''){&#xA;	extShowMessage('贸易方式不能为空');&#xA;	return;&#xA;}&#xA;if(CARGO_COD.getValue()==''){&#xA;	extShowMessage('货名不能为空');&#xA;	return;&#xA;}&#xA;if(C_CARGO_NAM.getValue()==''){&#xA;	extShowMessage('中午货名不能为空');&#xA;	return;&#xA;}&#xA;if (operateType == 'modify')&#xA;{&#xA;        OLD_PORT_ID.setValue(PORT_ID_TRUST_CARGO.getValue());&#xA;	updateRequestTrustCargo();&#xA;&#xA;}else{&#xA;       insertRequestTrustCargo();&#xA;&#xA;}&#xA;extWindow_Cargo.hide()"><extLabel name="extLabel45" left="10" top="10" width="55" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;进出口："/><extComboBox mode="local" left="80" top="5" width="120" name="PORT_ID_TRUST_CARGO" mapKey="PORT_ID" displayField="KEY_TEXT" valueField="KEY_ID" allowBlank="true"/><extLabel name="extLabel46" left="210" top="10" width="75" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;外贸："/><extLabel name="extLabel47" left="465" top="10" width="40" caption="危品：" align="right"/><extLabel name="extLabel48" left="15" top="40" width="50" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;货名："/><extLabel name="extLabel49" left="210" top="40" width="75" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;中文名称："/><extTextField left="300" top="35" width="120" name="C_CARGO_NAM" allowBlank="false"/><extLabel name="extLabel50" left="440" top="40" width="65" caption="英文名称：" align="right"/><extTextField left="520" top="35" width="120" name="E_CARGO_NAM"/><extLabel name="extLabel51" left="15" top="70" width="50" caption="总量：" align="right"/><extNumber left="80" top="65" width="120" name="TWEIGHT_TON"/><extLabel name="extLabel52" left="240" top="70" width="45" caption="体积：" align="right"/><extNumber left="300" top="65" width="120" name="TVOLUME_CBM"/><extLabel name="extLabel53" left="15" top="95" width="50" caption="20'E：" align="right"/><extNumber left="80" top="95" width="120" name="E20_NUM"/><extLabel name="extLabel54" left="235" top="100" width="50" caption="20'F：" align="right"/><extNumber left="300" top="95" width="120" name="F20_NUM"/><extLabel name="extLabel55" left="15" top="125" width="50" caption="40'E：" align="right"/><extNumber left="80" top="120" width="120" name="E40_NUM"/><extLabel name="extLabel56" left="235" top="125" width="50" caption="40'F：" align="right"/><extNumber left="300" top="120" width="120" name="F40_NUM"/><extLabel name="extLabel57" left="460" top="95" width="45" caption="45'E：" align="right"/><extNumber left="520" top="90" width="120" name="E45_NUM"/><extLabel name="extLabel58" left="460" top="125" width="45" caption="45'F：" align="right"/><extNumber left="520" top="120" width="120" name="F45_NUM"/><extLabel name="extLabel59" left="15" top="155" width="50" caption="备注：" align="right"/><extTextField left="80" top="150" width="560" name="REMARK_TXT_TRUST_GUEST"/><extComboBox mode="local" left="300" top="5" width="120" name="TRADE_ID_TRUST_CARGO" mapKey="ISYESORNO" displayField="KEY_TEXT" valueField="KEY_ID" allowBlank="false"/><extComboBox mode="local" left="520" top="5" width="120" name="DANGER_ID" mapKey="ISYESORNO" displayField="KEY_TEXT" valueField="KEY_ID"/><extTextField left="20" top="185" width="130" name="SHIP_NO_TRUST_CARGO" hidden="true"/><extTextField left="185" top="195" width="120" name="OLD_PORT_ID_TRUST_CARGO" hidden="true"/><extTextField left="190" top="225" width="120" name="OLD_SHIP_TRUST_NO_TRUST_CARGO" hidden="true"/><extTextField left="330" top="225" width="120" name="OLD_CARGO_COD" hidden="true"/><extTextField left="330" top="185" width="120" name="tableName_3" value="TRUST_CARGO" hidden="true"/><extTextField left="45" top="220" width="120" name="SHIP_TRUST_NO_TRUST_CARGO" hidden="true"/><extTextField left="520" top="205" width="120" name="TRUST_COD_TRUST_CARGO" hidden="true"/><extComboBox mode="local" left="80" top="35" width="120" name="CARGO_COD" store="cargoStore" displayField="CARGONAME" valueField="CARGONAME" onSelect="var v = extGetComboValue(CARGO_COD);&#xA;if(v!=null)&#xA;{&#xA;control.setValue(v.split('(')[0]);&#xA;var v1=Ext.getCmp(&quot;C_CARGO_NAM&quot;).setValue(strSplit(v)[0]);&#xA;var v2=Ext.getCmp(&quot;E_CARGO_NAM&quot;).setValue(strSplit(v)[1]);&#xA;}"/></extWindow><extWindow name="extWindow_Crew" closeAction="hide" frame="true" width="510" height="166" layout="absolute" caption="船员/旅客" onOk="if(PORT_ID.getValue()==''){&#xA;	extShowMessage('进出口标志不能为空');&#xA;	return;&#xA;}&#xA;if(GUEST_ATTR_ID.getValue()==''){&#xA;	extShowMessage('船员旅客标志不能为空');&#xA;	return;&#xA;}&#xA;&#xA;if(COUNTRY_COD.getValue()==''){&#xA;	extShowMessage('国籍不能为空');&#xA;	return;&#xA;}&#xA;if(SEX_ID.getValue()==''){&#xA;	extShowMessage('性别不能为空');&#xA;	return;&#xA;}&#xA;if (operateType == 'modify')&#xA;{&#xA;	updateRequestTrustGuest();&#xA;	&#xA;}else{&#xA;      insertRequestTrustGuest();&#xA;	&#xA;}&#xA;extWindow_Crew.hide()"><extLabel name="extLabel60" left="10" top="10" width="55" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;进出境："/><extComboBox mode="local" left="80" top="5" width="145" name="PORT_ID" mapKey="PORT_ID" displayField="KEY_TEXT" valueField="KEY_ID" allowBlank="false"/><extLabel name="extLabel61" left="235" top="10" width="85" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;船员/旅客："/><extComboBox mode="local" left="335" top="5" width="145" name="GUEST_ATTR_ID" mapKey="GUEST_ATTR_ID" displayField="KEY_TEXT" valueField="KEY_ID" allowBlank="false"/><extTextField left="425" top="95" width="60" name="OLD_GUEST_ATTR_ID" hidden="true"/><extLabel name="extLabel62" left="15" top="40" width="50" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;国籍："/><extTextField left="340" top="95" width="50" name="OLD_COUNTRY_COD" hidden="true"/><extLabel name="extLabel63" left="265" top="35" width="55" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;性别："/><extComboBox mode="local" left="335" top="35" width="145" name="SEX_ID" displayField="KEY_TEXT" valueField="KEY_ID" mapKey="SEX_ID" allowBlank="false"/><extTextField left="80" top="115" width="35" name="OLD_SEX_ID" hidden="true"/><extLabel name="extLabel64" left="10" top="70" width="55" caption="人数：" align="right"/><extNumber left="80" top="65" width="145" name="TRUST_NUM"/><extLabel name="extLabel65" left="255" top="65" width="65" caption="证书名称：" align="right"/><extTextField left="335" top="65" width="145" name="CERTIFICATE_NAM"/><extTextField left="25" top="145" width="105" name="tableName_4" value="TRUST_GUEST" hidden="true"/><extTextField left="70" top="90" width="120" name="SHIP_TRUST_NO_TRUST_GUEST" hidden="true"/><extTextField left="235" top="45" width="45" name="OLD_PORT_ID" hidden="true"/><extTextField left="200" top="90" width="60" name="OLD_SHIP_TRUST_NO_TRUST_GUEST" hidden="true"/><extTextField left="160" top="125" width="120" name="SHIP_NO_TRUST_GUEST" hidden="true"/><extTextField left="320" top="130" width="120" name="TRUST_COD_TRUST_GUEST" hidden="true"/><extComboBox mode="local" left="80" top="35" width="145" onSelect="var v = extGetComboValue(COUNTRY_COD);&#xA;{&#xA;control.setValue(strSplit(v)[0]);&#xA;}" name="COUNTRY_COD" store="countryStore" displayField="COUNTRYNAM" valueField="COUNTRYNAM" pageSize="20" listWidth="300" mustSelection="false" forceSelection="true" typeAhead="true" allowBlank="false" minChars="2"/><extTextField left="155" top="170" width="120" name="RECORD_MAN_TRUST_GUEST" hidden="true"/><extDate left="230" top="90" width="145" name="RECORD_TIM_TRUST_GUEST" hidden="true"/></extWindow></folder><extPanel name="panel" border="false"><extGrid name="grid" columnsModel="columnMode_Ship" left="0" top="5" width="100%" tbar="menu_Ship" height="250" region="200" store="shipGridstore" loadStore="false" onCellClick="grid1=Ext.getCmp(&quot;grid&quot;);&#xA;if (grid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一个有效的条目。');&#xA;	return;&#xA;}else{&#xA;	var record = grid.getSelectionModel().getSelected();&#xA;	extSetAllControlsValueObj(extForm, record.data);&#xA;        trustGridStore.load({params:{WhereSql:&quot; WHERE SHIP_NO='&quot;+record.get(&quot;SHIP_NO&quot;)+&quot;'&quot;}});&#xA;        trustCargoGridStore.load({params:{WhereSql:&quot; WHERE SHIP_NO='&quot;+record.get(&quot;SHIP_NO&quot;)+&quot;'&quot;}});&#xA;        trustGuestGridStore.load({params:{WhereSql:&quot; WHERE SHIP_NO='&quot;+record.get(&quot;SHIP_NO&quot;)+&quot;'&quot;}});&#xA;&#xA;}" pageSize="30"/><extForm name="extForm" layout="absolute" height="370" frame="true" left="10" top="10" border="false" autoScroll="true" region="center" width="100%"><extLabel name="extLabel1" left="5" width="65" top="5" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;船名："/><extComboBox mode="local" left="65" top="0" width="80" name="SHIP_COD" store="vesselStore" displayField="VESSELS" valueField="VESSELS" pageSize="20" listWidth="300" mustSelection="false" forceSelection="true" typeAhead="true" minChars="3" onSelect="var v = extGetComboValue(SHIP_COD);&#xA;if(v!=null)&#xA;{&#xA;Ext.getCmp(&quot;SHIP_COD&quot;).setValue(strSplit(v)[2]);&#xA;Ext.getCmp(&quot;C_SHIP_NAM&quot;).setValue(strSplit(v)[1]);&#xA;Ext.getCmp(&quot;E_SHIP_NAM&quot;).setValue(strSplit(v)[0]);&#xA;}" allowBlank="false" tag="tabIndex:10"/><extLabel name="extLabel2" left="700" top="5" width="75" caption="船舶档案号：" align="right"/><extTextField left="785" width="180" top="0" name="SHIP_ARCH_NBR" tag="tabIndex:50" maxLength="16" maxLengthText="最大长度为16！"/><extLabel name="extLabel3" left="405" top="5" width="95" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;进/出口航次："/><extTextField left="155" top="0" width="130" name="E_SHIP_NAM" allowBlank="false" tag="tabIndex:20" onBlur="control.setValue(control.getValue().toUpperCase());"/><extTextField left="515" top="0" width="85" name="IN_VOYAGE_NO" allowBlank="false" tag="tabIndex:40" onBlur="control.setValue(control.getValue().toUpperCase());" maxLength="10"/><extTextField left="605" top="0" width="80" name="OUT_VOYAGE_NO" allowBlank="false" tag="tabIndex:40" onBlur="control.setValue(control.getValue().toUpperCase());" maxLength="10"/><extTextField left="280" top="0" width="110" name="C_SHIP_NAM" allowBlank="false" tag="tabIndex:30" onBlur="control.setValue(control.getValue().toUpperCase());"/><extLabel name="extLabel4" left="690" top="30" width="85" caption="船舶海关代码：" align="right"/><extTextField left="785" top="25" width="180" name="SHIP_CUSTOM_NBR" tag="tabIndex:110" maxLength="32" maxLengthText="最大长度为32！"/><extLabel name="extLabel" left="0" top="30" width="70" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;我司代理："/><extLabel name="extLabel66" left="115" top="30" width="35" html="&lt;font color='red'&gt;*&lt;/font&gt;班轮"/><extLabel name="extLabel67" left="205" top="30" width="40" html="&lt;font color='red'&gt;*&lt;/font&gt;内贸"/><extLabel name="extLabel68" left="315" top="30" width="40" caption="艘次："/><extTextField left="350" top="25" width="40" name="SHIP_NUM" tag="tabIndex:90"/><extLabel name="extLabel69" left="415" top="30" width="85" caption="海事局码：" align="right"/><extTextField left="515" top="25" width="170" name="SHIP_MSA_NBR" tag="tabIndex:100" maxLength="8" maxLengthText="最大长度为8"/><extFieldSet name="fieldSet" collapsible="true" left="0" width="1005" height="110" caption="时间地点" layout="absolute" top="55"><extLabel name="extLabel5" left="5" top="5" width="75" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;预抵时间："/><extDate left="75" top="0" width="135" format="Y-m-d H:i" name="ETA_TIM" tag="tabIndex:120"/><extLabel name="extLabel6" left="655" top="30" width="60" caption="离泊计划：" align="right"/><extLabel name="extLabel7" left="215" top="5" width="60" caption="预抵位置："/><extComboBox mode="local" left="285" top="0" width="120" name="ETA_PLACE_STR" mapKey="ETA_PLACE_STR" displayField="KEY_TEXT" valueField="KEY_TEXT" tag="tabIndex:130"/><extLabel name="extLabel8" left="5" top="30" width="75" align="right" html="&lt;font color='red'&gt;*&lt;/font&gt;预离时间："/><extDate left="75" top="25" width="135" format="Y-m-d H:i" name="ETD_TIM" allowBlank="false" tag="tabIndex:140"/><extLabel name="extLabel9" left="440" top="5" width="50" caption="经纬度：" align="right"/><extTextField left="500" top="0" width="140" name="COORD_STR" tag="tabIndex:131" maxLength="40" maxLengthText="最大长度为40"/><extLabel name="extLabel10" left="770" top="30" width="80" caption="预离吃水-艏："/><extLabel name="extLabel11" left="890" top="25" width="30" caption="-艉："/><extLabel name="extLabel12" left="680" top="5" width="80" caption="预抵吃水-艏："/><extNumber left="765" top="0" width="45" name="ETA_BDRAFT_NUM"/><extLabel name="extLabel13" left="815" top="5" width="30" caption="-艉："/><extNumber left="850" top="0" width="40" name="ETA_SDRAFT_NUM"/><extLabel name="extLabel14" left="215" top="30" width="60" caption="预移时间："/><extDate left="285" top="25" width="120" format="Y-m-d H:i" name="ETS_TIM" tag="tabIndex:150"/><extLabel name="extLabel15" left="5" top="50" width="75" caption="卸货作业区：" align="right"/><extLabel name="extLabel16" left="430" top="30" width="60" caption="预移吃水：" align="right"/><extNumber left="500" top="25" width="140" name="ETS_DRAFT_NUM" tag="tabIndex:180"/><extLabel name="extLabel17" left="410" top="55" width="80" caption="装货作业区：" align="right"/><extLabel name="extLabel18" left="655" top="55" width="60" caption="运输方式：" align="right"/><extNumber left="850" top="25" width="35" name="ETD_BDRAFT_NUM"/><extNumber left="925" top="25" width="40" name="ETD_SDRAFT_NUM"/><extComboBox mode="local" left="895" top="0" width="70" name="SEA_WATER_ID" mapKey="SEA_WATER_ID" displayField="KEY_TEXT" valueField="KEY_ID"/><extComboBox mode="local" left="720" top="25" width="45" name="ETD_PLAN_ID" mapKey="ISYESORNO" displayField="KEY_TEXT" valueField="KEY_ID"/><extComboBox mode="local" left="75" top="50" width="135" name="DETT_COD" store="workPlaceStore" displayField="WORK_NAM" valueField="WORK_NAM" onSelect="var v = extGetComboValue(DETT_COD);&#xA;&#xA;if(v!=null)&#xA;{&#xA;Ext.getCmp(&quot;DETT_COD&quot;).setValue(v.split(&quot;(&quot;)[0]);&#xA;}" pageSize="20" listWidth="200"/><extComboBox mode="local" left="500" top="50" width="145" name="LETT_COD" store="workPlaceStore" displayField="WORK_NAM" valueField="WORK_NAM" onSelect="var v = extGetComboValue(LETT_COD);&#xA;&#xA;if(v!=null)&#xA;{&#xA;Ext.getCmp(&quot;LETT_COD&quot;).setValue(v.split(&quot;(&quot;)[0]);&#xA;}" pageSize="20" listWidth="200"/><extComboBox mode="local" left="720" top="50" width="95" name="TRANSPORT_MODE_COD" displayField="KEY_TEXT" valueField="KEY_ID" mapKey="TRANSMODE"/></extFieldSet><extFieldSet name="fieldSet1" collapsible="true" caption="来往港" layout="absolute" height="85" width="1005" left="0" top="175"><extLabel name="extLabel19" left="10" top="5" width="60" caption="航线代码：" align="left"/><extTextField left="185" top="0" width="165" name="LINE_NAM"/><extComboBox mode="local" left="80" top="0" width="100" name="LINE_COD" store="lineStore" displayField="LINENAM" valueField="LINENAM" pageSize="15" listWidth="300" onSelect="var v = extGetComboValue(LINE_COD);&#xA;if(v!=null)&#xA;{&#xA;Ext.getCmp(&quot;LINE_NAM&quot;).setValue(strSplit(v)[1]);&#xA;Ext.getCmp(&quot;LINE_COD&quot;).setValue(strSplit(v)[0]);&#xA;}"/><extLabel name="extLabel20" left="360" top="5" width="50" caption="近洋："/><extLabel name="extLabel21" left="530" top="5" width="85" caption="订舱截止时间：" align="right"/><extDate left="625" top="0" format="Y-m-d H:i" width="135" name="IFTMBF_END_TIM"/><extLabel name="extLabel22" left="775" top="5" width="60" caption="起始时间："/><extDate left="850" top="0" width="120" format="Y-m-d H:i" name="START_PORT_TIM"/><extLabel name="extLabel23" left="10" top="30" width="90" caption="预抵下港时间：" align="left"/><extDate left="110" top="25" width="120" format="Y-m-d H:i" name="NEXT_PORT_TIM"/><extLabel name="extLabel24" left="235" top="30" width="55" caption="开来港："/><extComboBox mode="local" left="285" top="25" width="100" name="E_FROM_PORT_NAM" store="portStore" pageSize="15" listWidth="300" mustSelection="false" forceSelection="true" typeAhead="true" displayField="PORT_NAM" valueField="PORT_NAM" onSelect="var v = extGetComboValue(E_FROM_PORT_NAM);&#xA;if(v!=null)&#xA;{&#xA;var v1=Ext.getCmp(&quot;E_FROM_PORT_NAM&quot;).setValue(strSplit(v)[1]);&#xA;var v2=Ext.getCmp(&quot;C_FROM_PORT_NAM&quot;).setValue(strSplit(v)[0]);&#xA;}" onBlur="control.setValue(control.getEl().getValue().toUpperCase());" minChars="3"/><extTextField left="385" top="25" width="135" name="C_FROM_PORT_NAM"/><extLabel name="extLabel25" left="560" top="30" width="55" caption="开往港：" align="right"/><extComboBox mode="local" left="625" top="25" width="90" name="E_TO_PORT_NAM" store="portStore" displayField="PORT_NAM" valueField="PORT_NAM" pageSize="15" listWidth="300" forceSelection="true" mustSelection="false" typeAhead="true" onSelect="var v = extGetComboValue(E_TO_PORT_NAM);&#xA;if(v!=null)&#xA;{&#xA;var v1=Ext.getCmp(&quot;E_TO_PORT_NAM&quot;).setValue(strSplit(v)[1]);&#xA;var v2=Ext.getCmp(&quot;C_TO_PORT_NAM&quot;).setValue(strSplit(v)[0]);&#xA;}" onBlur="control.setValue(control.getEl().getValue().toUpperCase());" minChars="3"/><extTextField left="715" top="25" width="175" name="C_TO_PORT_NAM"/><extComboBox mode="local" left="415" top="0" width="105" name="NEAR_FAR_ID" displayField="KEY_TEXT" valueField="KEY_ID" mapKey="NEAR_FAR_ID"/></extFieldSet><extLabel name="extLabel26" left="5" top="275" width="50" caption="引水：" align="right"/><extLabel name="extLabel27" left="130" top="275" width="110" html="&lt;font color='red'&gt;*&lt;/font&gt;五日船期表强入："/><extLabel name="extLabel28" left="315" top="275" width="65" caption="航次主管：" align="right"/><extTextField left="390" top="270" width="155" name="VOY_DIRECTOR"/><extLabel name="extLabel29" left="555" top="275" width="55" caption="揽船人："/><extTextField left="600" top="270" width="155" name="BUSINESS_MAN"/><extLabel name="extLabel30" left="775" top="275" width="55" caption="船长："/><extTextField left="820" top="270" width="160" name="MASTER_NAM"/><extLabel name="extLabel31" left="5" top="300" width="50" caption="备注：" align="right"/><extTextField left="65" top="300" width="235" name="REMARK_TXT"/><extLabel name="extLabel32" left="335" top="305" width="45" caption="录入：" align="right"/><extLabel name="extLabel35" left="775" top="335" width="55" caption="修改：" hidden="true"/><extLabel left="725" top="305" width="95" name="RECORD_MODI_MAN"/><extLabel left="855" top="305" width="110" name="RECORD_MODI_TIM"/><extComboBox mode="local" left="65" top="25" width="45" name="AGENCY_ID" displayField="KEY_TEXT" valueField="KEY_ID" mapKey="ISYESORNO" allowBlank="false" tag="tabIndex:60"/><extComboBox mode="local" left="155" top="25" width="50" name="TL_ID" displayField="KEY_TEXT" valueField="KEY_ID" mapKey="TL_ID" allowBlank="false" tag="tabIndex:70"/><extComboBox mode="local" left="255" top="25" width="40" name="TRADE_ID" mapKey="ISYESORNO" displayField="KEY_TEXT" valueField="KEY_ID" allowBlank="false" tag="tabIndex:80"/><extComboBox mode="local" left="65" top="270" width="55" name="PILOTAGE_ID" mapKey="ISYESORNO" displayField="KEY_TEXT" valueField="KEY_ID"/><extComboBox mode="local" left="245" top="270" width="55" name="FIVE_VOYAGE_Y" mapKey="ISYESORNO" displayField="KEY_TEXT" valueField="KEY_ID" allowBlank="false"/><extTextField left="15" top="325" width="45" name="SHIP_STAT_ID" hidden="true" value="0"/><extTextField left="390" top="300" width="130" name="RECORD_MAN" readOnly="true"/><extTextField left="75" top="325" width="45" name="BERTH_REQ_ID" value="1" hidden="true"/><extTextField left="135" top="325" width="50" name="BL_SHIPCARD_PRT_ID" value="1" hidden="true"/><extTextField left="200" top="325" width="50" name="SHIP_NO" hidden="true"/><extTextField left="275" top="330" width="120" name="tableName" value="SHIP" hidden="true"/><extTextField left="425" top="335" width="120" name="OLD_SHIP_NO" hidden="true"/><extLabel name="extLabel33" left="535" top="300" width="60" caption="录入时间："/><extDate left="600" width="155" name="RECORD_TIM" format="Y-m-d H:i" readOnly="true" top="300"/></extForm><extTab name="tab" activeTab="0" deferredRender="false" region="south" left="10" top="10" width="100%" height="200"><extGrid region="center" columnsModel="columnModel_Trust" height="250" tbar="menu_ship_wy" caption="航次委托方" name="grid_ship_wy" left="10" top="10" width="100%" store="trustGridStore" loadStore="false"/><extGrid caption="委托货物" columnsModel="columnModel_Cargo" tbar="menu_Cargo" name="grid_ship_cntr" left="10" top="40" height="120" width="100%" store="trustCargoGridStore" loadStore="false"/><extGrid columnsModel="columnModel_Crew" tbar="menu_Crew" name="grid_ship_crew" caption="船员/旅客" left="10" top="70" height="120" width="100%" store="trustGuestGridStore" loadStore="false"/></extTab></extPanel></body>
