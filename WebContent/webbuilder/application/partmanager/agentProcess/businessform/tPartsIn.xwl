<?xml version="1.0" encoding="utf-8"?>
<body name="body" compact="true" class="sys_normal" headerScript="var operateType ;" caption="入库计划">
	<folder name="storeFolder">
		<extStore name="mainselect" url="main?action=webbuilder/application/partmanager/tPartsIn/store/mainselect.xwl" autoLoad="false"/>
		<extAjax url="main?action=webbuilder/application/partmanager/tPartsIn/store/mainsave.xwl" out="mainWindow" onSuccess="extShowMessage('新增成功！');&#xA;mainWindow.hide();&#xA;mainselect.baseParams=extGetAllControlsValue('mainmenu');&#xA;mainselect.load({params:{start:0,limit:30}});" name="mainsave"/>
		<extAjax url="main?action=webbuilder/application/partmanager/tPartsIn/store/mainupdate.xwl" out="mainWindow" onSuccess="extShowMessage('操作成功！');&#xA;mainWindow.hide();&#xA;mainselect.baseParams=extGetAllControlsValue('mainmenu');&#xA;mainselect.load({params:{start:0,limit:30}});" name="mainupdate"/>
		<extAjax url="main?action=webbuilder/application/partmanager/tPartsIn/store/maindelete.xwl" onSuccess="extRemoveGridSelection(maingrid);&#xA;mainselect.baseParams=extGetAllControlsValue('mainmenu');&#xA;mainselect.load({params:{start:0,limit:30}});" out="maingrid" showMessage="true" name="maindelete"/>
		<extStore name="detailselect" url="main?action=webbuilder/application/partmanager/tPartsIn/store/detailselect.xwl" autoLoad="false"/><extAjax out="detailWindow" name="detailsave" url="main?action=webbuilder/application/partmanager/tPartsIn/store/detailsave.xwl" onFailure="var s = response.responseText;&#xA;extShowExcept(s);" onSuccess="extShowMessage('新增成功！');extCall(detailsearch);detailWindow.hide();"/><extAjax name="detailupdate" url="main?action=webbuilder/application/partmanager/tPartsIn/store/detailupdate.xwl" out="detailWindow" onSuccess="extShowMessage('新增成功！');extCall(detailsearch);detailWindow.hide();" onFailure="var s = response.responseText;&#xA;extShowExcept(s);"/><extAjax out="detailgrid" onSuccess="extRemoveGridSelection(detailgrid);" name="detaildeleted" url="main?action=webbuilder/application/partmanager/tPartsIn/store/detaildeleted.xwl"/><extAjax url="main?action=webbuilder/application/common/getSql.xwl" out="detailWindow" onSuccess="alert(&quot;保存成功！&quot;);" onFailure="alert(&quot;保存失败&quot;);" name="getSql"/><extStore name="getInPartstype" url="main?action=webbuilder/application/partmanager/common/CodeSelect.xwl" baseParams="fldId:'7'"/><extStore name="getInModType" url="main?action=webbuilder/application/partmanager/common/CodeSelect.xwl" baseParams="fldId:'8'"/><extStore name="getFetchModeTxt" url="main?action=webbuilder/application/partmanager/common/CodeSelect.xwl" baseParams="fldId:'16'"/><extStore name="getPayKindtype" url="main?action=webbuilder/application/partmanager/common/CodeSelect.xwl" baseParams="fldId:'15'"/><extStore name="getStoreCod" url="main?action=webbuilder/application/partmanager/common/CodeSelect.xwl" baseParams="fldId:'7'"/><extStore name="getPartsClass" url="main?action=webbuilder/application/partmanager/common/CodeSelect.xwl" baseParams="fldId:'7'"/><extAjax url="main?action=webbuilder/application/partmanager/tPartsIn/store/startProcess.xwl" onSuccess="extShowMessage('发起成功！');" onFailure="extShowMessage('发起失败！');" out="maingrid" name="ajaxStartProcess"/><extAjax name="ajaxViewprocess" url="main?action=webbuilder/application/partmanager/outApply/store/viewProcess.xwl"/><extStore url="main?action=webbuilder/application/partmanager/wasteApply/wasteApply/selectprocess.xwl" autoLoad="true" name="selectprocess"/><extStore name="selectStorage" url="main?action=webbuilder/application/partmanager/wasteApply/wasteApply/selectStorage.xwl"/><method methodName="com.xuelang.partmanage.MultipleTree.getPartsTypeTree" name="getDeviceTree"/><folder name="combSelect"><extStore name="getInmodStore" baseParams="fldId:'8'" url="main?action=webbuilder/application/partmanager/common/CodeSelect.xwl"/><extStore name="getPayMod" baseParams="fldId:'10'" url="main?action=webbuilder/application/partmanager/common/CodeSelect.xwl"/><extStore name="getDwStore" baseParams="fldId:'1'" url="main?action=webbuilder/application/partmanager/common/CodeSelect.xwl"/></folder></folder>
	<folder name="fdColumn"><extTextField name="PARTS_COD1" autoShow="false"/><extTextField name="C_PARTS_NAM1" autoShow="false"/><extTextField name="STAND_TXT1" autoShow="false"/><extNumber decimalPrecision="2" allowDecimals="true" autoShow="false" maxValue="9999999" name="INDEPOTNUM1"/><extNumber name="STOCK_NUM1" autoShow="false"/><extNumber name="KEEP_VAL1" value="false"/><extNumber name="TAX_NUM1" autoShow="false"/><extNumber name="TAX_RATE1" autoShow="false"/><extTextField name="LOCATION_NO1" autoShow="false"/><extNumber name="PRICE_VAL1" autoShow="false"/><extNumber name="AMOUNT1" autoShow="false"/><extTextField name="CHEQUE_NO1" autoShow="false"/><extTextField name="INVOICE_NO1" autoShow="false"/><extComboBox mode="local" name="IS_TXT1" displayField="KEY_TEXT" valueField="KEY_TEXT" autoShow="false" mapKey="YN"/><extComboBox mode="local" name="PAY_MOD1" displayField="RNAME" valueField="RNAME" pageSize="15" store="getPayMod" autoShow="false"/><extComboBox mode="local" name="IS_CONTANT1" mapKey="IS_PLAN" displayField="KEY_TEXT" valueField="KEY_TEXT" autoShow="false"/><extComboBox mode="local" name="SUPPLIER_NAM1" store="storeSuppli" displayField="RNAME" valueField="RNAME" pageSize="30" onSelect="SUPPLIER_COD.setValue(this.value.split('/')[1]);" autoShow="false"/><extComboBox mode="local" name="MIN_UNIT1" store="getDwStore" valueField="RNAME" displayField="RNAME" pageSize="15" autoShow="false"/><extColumnModel name="mainModel"><extColumn width="100" align="center" name="_RECP_NO" caption="入库单号" fieldName="RECP_NO"/><extColumn width="100" align="center" name="_OF_NO" caption="订单号" fieldName="OF_NO"/><extColumn name="_PUR_NO" fieldName="PUR_NO" caption="申请号" width="100" align="center"/><extColumn name="_UNIT_COD" fieldName="UNIT_COD" caption="领料部门" align="center" width="100"/><extColumn name="_PARTS_TYPE" fieldName="PARTS_TYPE" caption="类型" width="100" align="center"/><extColumn width="80" name="_IN_STATUE" fieldName="IN_STATUE" hidden="true"/><extColumn name="_IN_MOD" fieldName="IN_MOD" hidden="true"/><extColumn name="_PLAN_DTE" fieldName="PLAN_DTE" caption="计划日期" width="80" align="center"/><extColumn name="_INDEPOT_DTE" fieldName="INDEPOT_DTE" caption="入库时间" width="80" align="center"/><extColumn name="_STORAGE_COD" caption="仓库编号" fieldName="STORAGE_COD" width="100" align="center"/><extColumn name="_STORAGE_NAM" fieldName="STORAGE_NAM" caption="仓库名称" align="center" width="100"/><extColumn name="_CARRYFEE_NUM" fieldName="CARRYFEE_NUM" caption="杂运费" align="center" width="80"/><extColumn name="_MANAGER_COD" fieldName="MANAGER_COD" caption="主管人" align="center" width="80"/><extColumn name="_COMPUTER_COD" fieldName="COMPUTER_COD" caption="核算员" align="center" width="80"/><extColumn name="_SAVER_COD" fieldName="SAVER_COD" caption="保管员" align="center" width="80"/><extColumn name="_FETCHMODE_TXT" fieldName="FETCHMODE_TXT" caption="提运方式" align="center" width="80"/><extColumn name="_PAYKIND_TYP" fieldName="PAYKIND_TYP" caption="结算方式" align="center" width="80"/><extColumn name="_WF_STATUE" fieldName="WF_STATUE" caption="流程状态" width="80" align="center" renderer="if(value==1){&#xA;return '正在审批';&#xA;}else if(value==2){&#xA;return '审批通过';&#xA;}else if(value==3){&#xA;return '未通过';&#xA;}else{&#xA;return '未审批';&#xA;}"/><extColumn name="_BUYER_COD" fieldName="BUYER_COD" caption="采购员" align="center" width="80"/><extColumn name="_is_contract" fieldName="is_contract" caption="是否有合同" renderer="if(value==1){&#xA;return '有';&#xA;}else{&#xA;return '无';&#xA;}"/><extColumn name="_RECORD_TIM" fieldName="RECORD_TIM" caption="录入日期" align="center" width="80"/><extColumn name="_RECORD_MAN" fieldName="RECORD_MAN" caption="录入人" width="80" align="center"/><extColumn name="_DEPT_COD" fieldName="DEPT_COD" caption="部门" hidden="true"/><extColumn name="_USERID" fieldName="USERID" caption="用户代码" hidden="true"/><extColumn name="_REMARKS" fieldName="REMARKS" caption="备注" width="200"/></extColumnModel><extColumnModel name="detailModel"><extColumn name="PARTS_COD_1" caption="物料代码" align="center" width="100" editor="PARTS_COD1" fieldName="PARTS_COD"/><extColumn name="C_PARTS_NAM_1" caption="中文名" align="center" width="100" editor="C_PARTS_NAM1" fieldName="C_PARTS_NAM"/><extColumn name="E_PARTS_NAM_1" caption="英文名" width="100" align="center" hidden="true" fieldName="E_PARTS_NAM"/><extColumn name="STAND_TXT_1" caption="规格" align="center" width="100" editor="STAND_TXT1" fieldName="STAND_TXT"/><extColumn name="PRICE_VAL_1" caption="成本价格" align="center" width="80" editor="PRICE_VAL1" fieldName="PRICE_VAL"/><extColumn name="AMOUNT_1" align="center" width="80" editor="AMOUNT1" fieldName="AMOUNT" caption="金额"/><extColumn name="MIN_UNIT_2" caption="单位" width="80" align="center" editor="MIN_UNIT1" fieldName="MIN_UNIT"/><extColumn name="IS_TAX_1" caption="是否含税" editor="IS_TXT1" fieldName="IS_TAX"/><extColumn name="TAX_RATA_1" caption="税率（%）" fieldName="TAX_RATE" editor="TAX_RATE1" align="right"/><extColumn name="TAX_NUM_1" caption="税额" align="right" width="80" editor="TAX_NUM1" fieldName="TAX_NUM"/><extColumn name="INDEPOT_NUM_1" caption="入库数量" align="center" width="80" editor="INDEPOTNUM1" fieldName="INDEPOT_NUM"/><extColumn name="STOCK_NUM_1" caption="现存量" align="center" width="80" editor="STOCK_NUM1" fieldName="STOCK_NUM"/><extColumn name="KEEP_VAL_1" caption="保存期" align="center" width="80" editor="KEEP_VAL1" fieldName="KEEP_VAL"/><extColumn name="LOCATION_NO_1" caption="货位号" align="center" width="100" editor="LOCATION_NO1" fieldName="LOCATION_NO"/><extColumn name="CHEQUE_NO_1" caption="支票号" align="center" width="100" editor="CHEQUE_NO1" fieldName="CHEQUE_NO"/><extColumn name="INVOICE_NO_1" caption="发票号" align="center" width="100" editor="INVOICE_NO1" fieldName="INVOICE_NO"/><extColumn name="PAY_MOD_1" caption="付款方式" align="center" width="100" editor="PAY_MOD1" fieldName="PAY_MOD"/><extColumn name="SUPPLIER_NAM_1" caption="供应商名称" width="100" align="center" editor="SUPPLIER_NAM1" fieldName="SUPPLIER_NAM"/><extColumn caption="caption" name="IS_CONTANT_1" hidden="true" editor="IS_CONTANT1" fieldName="IS_CONTANT"/><extColumn name="RECORD_TIM_1" caption="录入时间" align="center" width="80" fieldName="RECORD_TIM"/><extColumn name="RECORD_MAN_1" caption="录入人" align="center" width="80" fieldName="RECORD_MAN"/><extColumn name="DEPT_COD21" caption="所属部门" align="center" width="80" fieldName="DEPT_COD"/><extColumn name="USERID_1" caption="用户代码" hidden="true" fieldName="USERID"/><extColumn name="REMARKS_1" caption="备注" width="200" fieldName="REMARKS"/></extColumnModel><extColumnModel name="columnProcess"><extColumn name="username_" fieldName="username" caption="发起人" align="center" width="80"/><extColumn name="starttime_" fieldName="starttime" caption="发起时间" align="center" width="100"/><extColumn name="taskname_" fieldName="taskname" caption="审核阶段" align="center" width="100"/><extColumn name="checkman_" fieldName="checkman" caption="审核人" align="center" width="80"/><extColumn name="begintime_" fieldName="begintime" caption="到达日期" align="center" width="100"/><extColumn name="endtime_" fieldName="endtime" caption="完成日期" align="center" width="100"/><extColumn name="duration_" fieldName="duration" caption="过程耗时(H)" align="center" width="100"/><extColumn name="status_" fieldName="status" caption="状态" align="center" width="80"/></extColumnModel></folder><folder name="column"><extNumber name="INDEPOTNUM" autoShow="false" allowDecimals="false" maxValue="999999999"/></folder><folder name="window"><extWindow name="mainWindow" frame="true" caption="入库计划维护" onShow="if(operateType == 'insert'){&#xA;	extResetAllControlsValue(&quot;mainWindow&quot;);	&#xA;&#xA;&#xA;}&#xA;if(operateType == 'modify'){&#xA;	var record = maingrid.getSelectionModel().getSelected();		&#xA;	extSetAllControlsValueObj(mainWindow, record.data);&#xA;&#xA;}" onOk="if (!extVerifyAllControls('mainWindow')) return; &#xA;if(operateType == 'insert'){&#xA;&#xA;	mainsave();&#xA;	&#xA;}&#xA;if(operateType == 'modify'){&#xA;	mainupdate();&#xA;}" width="817" height="303" layout="absolute" closeAction="hide"><extLabel caption="订单号：" name="extLabel12" left="10" top="15" width="100"/><extTextField name="OF_NO" left="125" top="10" width="130"/><extLabel caption="申请号：" name="extLabel2" left="270" top="15" width="100"/><extTextField name="PUR_NO1" left="375" top="10" width="130"/><extLabel caption="入库方式：" name="extLabel5" left="270" top="45" width="100"/><extLabel caption="仓库编号：" name="extLabel7" left="10" top="75" width="100"/><extLabel caption="仓库名称：" name="extLabel8" left="270" top="75" width="100"/><extTextField name="STORAGE_NAM" left="375" top="70" width="130"/><extLabel caption="运杂费：" name="extLabel91" left="520" top="50" width="100"/><extTextField name="CARRYFEE_NUM" left="625" top="45" width="130"/><extLabel caption="主管人：" name="extLabel101" left="10" top="105" width="100"/><extTextField name="MANAGER_COD" left="125" top="100" width="130"/><extLabel caption="核算员：" name="extLabel111" left="270" top="105" width="100"/><extTextField name="COMPUTER_COD" left="375" top="100" width="130"/><extLabel caption="保管员：" name="extLabel122" left="520" top="80" width="100"/><extTextField name="SAVER_COD" left="625" top="75" width="130"/><extLabel caption="提运方式：" name="extLabel131" left="10" top="135" width="100"/><extLabel caption="结算方式：" name="extLabel141" left="270" top="130" width="100"/><extLabel caption="采购员：" name="extLabel161" left="520" top="110" width="100"/><extTextField name="BUYER_COD" left="625" top="105" width="130"/><extLabel caption="备注：" name="extLabel212" left="10" top="185" width="100"/><extTextField name="REMARKS" left="125" top="160" width="380" inputType="textArea" height="55"/><extComboBox mode="remote" name="IN_MOD" left="375" top="40" width="130" store="getInModType" displayField="RNAME" valueField="RNAME" pageSize="10" listWidth="135"/><extComboBox mode="remote" name="FETCHMODE_TXT" store="getFetchModeTxt" displayField="RNAME" valueField="RNAME" pageSize="10" left="125" top="130" width="130" listWidth="130"/><extComboBox mode="remote" name="PAYKIND_TYP" displayField="RNAME" valueField="RNAME" pageSize="10" left="375" top="130" width="130" listWidth="130" store="getFetchModeTxt"/><extLabel name="PLAN_DTE_" caption="计划日期" left="520" top="20" width="95"/><extDate name="PLAN_DTE" left="625" top="15" width="130"/><extTextField name="RECP_NO1" hidden="true" left="135" top="220" width="80"/><extCheckBox left="630" top="130" width="125" height="20" name="is_contract" boxLabel="是否有合同"/><extComboBox mode="local" left="125" top="70" width="130" name="STORAGE_COD" store="selectStorage" displayField="storage" valueField="storage" onSelect="var storage_=this.value.split('/');&#xA;STORAGE_COD.setValue(storage_[0]);&#xA;STORAGE_NAM.setValue(storage_[1]);"/><extComboTree data="{#parttypeTree#}" left="125" top="35" width="130" height="25" onClick="PARTS_TYPE.setValue(node.text);&#xA;PARTS_TYPE.collapse();" name="PARTS_TYPE"/><extLabel name="extLabel3" caption="类型：" left="10" top="40" width="100"/></extWindow><extWindow frame="true" caption="入库计划细维护" onShow="if(operateType == 'insert'){&#xA;	var mrecord = maingrid.getSelectionModel().getSelected();&#xA;	extResetAllControlsValue(&quot;detailWindow&quot;);&#xA;	RECP_NO.setValue(mrecord.data.RECP_NO);	&#xA;}&#xA;if(operateType == 'modify'){&#xA;	var record = detailgrid.getSelectionModel().getSelected();		&#xA;	extSetAllControlsValueObj(detailWindow, record.data);&#xA;}" onOk="if (!extVerifyAllControls('detailWindow')) return; &#xA;if(operateType == 'insert'){&#xA;&#xA;	detailsave();&#xA;	&#xA;}&#xA;if(operateType == 'modify'){&#xA;	detailupdate();&#xA;}" width="814" height="379" layout="absolute" closeAction="hide" name="detailWindow"><extLabel caption="税额：" name="extLabel1" left="15" top="135" width="100"/><extTextField name="TAX_NUM" left="130" top="130" width="130"/><extLabel caption="入库数量：" name="extLabel21" left="15" top="105" width="100"/><extTextField name="INDEPOT_NUM" left="130" top="100" width="130"/><extLabel caption="现存量：" name="extLabel32" left="15" top="165" width="100"/><extTextField name="STOCK_NUM" left="130" top="160" width="130"/><extLabel caption="保存期：" name="extLabel42" left="275" top="165" width="100"/><extTextField name="KEEP_VAL" left="380" top="160" width="130"/><extLabel caption="货位号：" name="extLabel52" left="275" top="80" width="100"/><extTextField name="LOCATION_NO" left="380" top="75" width="130"/><extLabel caption="支票号：" name="extLabel62" left="15" top="195" width="100"/><extTextField name="CHEQUE_NO" left="130" top="190" width="130"/><extLabel caption="发票号：" name="extLabel72" left="275" top="195" width="100"/><extTextField name="INVOICE_NO" left="380" top="190" width="130"/><extLabel caption="付款方式：" name="extLabel81" left="525" top="165" width="100"/><extLabel caption="供应商代码：" name="extLabel9" left="15" top="225" width="100"/><extTextField name="SUPPLIER_COD" left="130" top="220" width="130"/><extLabel caption="供应商名称：" name="extLabel10" left="275" top="225" width="100"/><extTextField name="SUPPLIER_NAM" left="380" top="220" width="130"/><extTextField name="IS_CONTANT" left="40" top="320" width="95" hidden="true"/><extLabel caption="备注：" name="extLabel16" left="15" top="255" width="100"/><extTextField name="REMARKS1" left="130" top="255" width="630" inputType="textArea" height="65"/><extTextField name="IN_SEQ_NO" left="20" top="290" width="75" hidden="true"/><extLabel caption="入库单号：" name="extLabel181" left="15" top="20" width="100"/><extTextField name="RECP_NO" left="130" top="15" width="130"/><extLabel caption="订单号：" name="extLabel19" left="275" top="20" width="100"/><extTextField name="PURCH_NO" left="380" top="15" width="130"/><extLabel caption="订单流水号：" name="extLabel20" left="525" top="20" width="100"/><extTextField name="SEQ_NO" left="630" top="15" width="130"/><extLabel caption="入库类别：" name="extLabel211" left="15" top="50" width="100"/><extLabel caption="物料代码：" name="extLabel22" left="275" top="50" width="100"/><extTextField name="PARTS_COD" left="380" top="45" width="130"/><extLabel caption="中文名：" name="extLabel23" left="525" top="50" width="100"/><extTextField name="C_PARTS_NAM" left="630" top="45" width="130"/><extLabel caption="规格：" name="extLabel25" left="15" top="75" width="100"/><extTextField name="STAND_TXT" left="130" top="70" width="130"/><extLabel caption="成本价格：" name="extLabel26" left="275" top="135" width="95"/><extTextField name="PRICE_VAL" left="380" top="130" width="130"/><extLabel caption="金额：" name="extLabel27" left="525" top="130" width="90"/><extTextField name="AMOUNT" left="630" top="125" width="130"/><extLabel name="MIN_UNIT_1" caption="单位" left="275" top="105" width="95"/><extTextField name="MIN_UNIT" left="380" top="100" width="130"/><extCheckBox name="IS_TAX" left="635" top="70" width="125" height="15" boxLabel="是否含税" checked="true" value="1"/><extLabel name="PARTS_CLASS_1" caption="物料类型：" left="525" top="195" width="95"/><extComboBox mode="remote" name="PARTS_CLASS" left="630" top="185" width="130" valueField="RNAME" createHidden="RNAME" pageSize="10" listWidth="130" store="getPartsClass"/><extLabel name="PARTS_TYPE_1" caption="类型：" left="525" top="220" width="95"/><extComboBox mode="remote" name="PARTS_TYPE1" left="630" top="215" width="130" displayField="RNAME" valueField="RNAME" pageSize="10" listWidth="130" store="getInPartstype"/><extComboBox mode="remote" name="SORT_COD" left="130" top="45" width="130" displayField="RNAME" valueField="RNAME" pageSize="10" listWidth="130" store="getStoreCod"/><extComboBox mode="remote" name="PAY_MOD" valueField="RNAME" displayField="RNAME" pageSize="10" store="getInModType" left="630" top="155" width="130" listWidth="130"/><extTextField left="630" top="95" width="130" name="TAX_RATE"/><extLabel name="tax_rateLabel" caption="税率(%)：" left="525" top="100" width="90"/></extWindow><extWindow closeAction="hide" frame="true" name="processViewWindow" caption="审批进度" width="800" height="400" dialog="false" autoScroll="true"><extTab activeTab="0" deferredRender="false" region="center" name="detailtab"><extPanel name="flowPanel" border="false" caption="审批明细" layout="absolute" width="801" height="462"><extGrid store="selectprocess" left="10" top="5" width="765" height="205" name="tasklist" columnsModel="columnProcess"/><extForm name="imagemodel" left="15" top="215" width="760" height="190"><image name="image"/></extForm></extPanel><extPanel border="false" layout="absolute" width="800" height="500" name="businessPanel" caption="入库明细"><extForm name="mainForm" left="10" top="10" width="770" height="230" layout="absolute" frame="true"><extLabel caption="订单号：" name="extLabel121" left="10" top="15" width="100"/><extTextField name="OF_NO1" left="125" top="10" width="130"/><extLabel caption="申请号：" name="extLabel24" left="270" top="15" width="100"/><extTextField name="PUR_NO11" left="375" top="10" width="130"/><extLabel caption="类型：" name="extLabel31" left="10" top="45" width="100"/><extLabel caption="入库方式：" name="extLabel51" left="270" top="45" width="100"/><extLabel caption="入库日期：" name="extLabel61" left="520" top="40" width="100"/><extDate name="INDEPOT_DTE1" left="625" top="35" width="130"/><extLabel caption="仓库编号：" name="extLabel71" left="10" top="70" width="100"/><extTextField name="STORAGE_COD1" left="125" top="65" width="130"/><extLabel caption="仓库名称：" name="extLabel82" left="270" top="70" width="100"/><extTextField name="STORAGE_NAM1" left="375" top="65" width="130"/><extLabel caption="运杂费：" name="extLabel911" left="520" top="65" width="100"/><extTextField name="CARRYFEE_NUM1" left="625" top="60" width="130"/><extLabel caption="主管人：" name="extLabel1011" left="10" top="95" width="100"/><extTextField name="MANAGER_COD1" left="125" top="90" width="130"/><extLabel caption="核算员：" name="extLabel1111" left="270" top="90" width="100"/><extTextField name="COMPUTER_COD1" left="375" top="85" width="130"/><extLabel caption="保管员：" name="extLabel1221" left="520" top="90" width="100"/><extTextField name="SAVER_COD1" left="625" top="85" width="130"/><extLabel caption="提运方式：" name="extLabel1311" left="10" top="120" width="100"/><extLabel caption="结算方式：" name="extLabel1411" left="270" top="115" width="100"/><extLabel caption="采购员：" name="extLabel1611" left="520" top="115" width="100"/><extTextField name="BUYER_COD1" left="625" top="110" width="130"/><extLabel caption="备注：" name="extLabel2121" left="10" top="165" width="100"/><extTextField name="REMARKS2" left="125" top="140" width="380" inputType="textArea" height="55"/><extComboBox mode="remote" name="PARTS_TYPE2" left="125" top="40" width="130" store="getInPartstype" displayField="RNAME" valueField="RNAME" pageSize="10" listWidth="130"/><extComboBox mode="remote" name="IN_MOD1" left="375" top="40" width="130" store="getInModType" displayField="RNAME" valueField="RNAME" pageSize="10" listWidth="135"/><extComboBox mode="remote" name="FETCHMODE_TXT1" store="getFetchModeTxt" displayField="RNAME" valueField="RNAME" pageSize="10" left="125" top="115" width="130" listWidth="130"/><extComboBox mode="remote" name="PAYKIND_TYP1" displayField="RNAME" valueField="RNAME" pageSize="10" left="375" top="115" width="130" listWidth="130" store="getFetchModeTxt"/><extLabel name="PLAN_DTE_1" caption="计划日期" left="520" top="15" width="95"/><extDate name="PLAN_DTE1" left="625" top="10" width="130"/><extTextField name="RECP_NO11" hidden="true" left="135" top="200" width="80"/><extCheckBox left="560" top="150" width="185" height="20" name="is_contract1" boxLabel="是否有合同"/></extForm><extGrid left="10" top="245" width="770" height="230" columnsModel="detailModel" name="detailgrid1" store="detailselect"/></extPanel></extTab></extWindow></folder><folder name="menu"><extMenu name="mainmenu" style="" bodyStyle="" autoShow="false"><extLabel name="PUR_NO" caption="申请单号"/><extTextField name="purNo"/><extMenuItem onClick="var purno =purNo.getValue()==null?'':purNo.getValue();&#xA;mainselect.baseParams.whereSql=&quot; AND PUR_NO like '%&quot;+purno +&quot;%'&quot;;&#xA;mainselect.load({params:{start:0,limit:30}});" caption="查询" iconCls="icon_find" name="menusearch"/><extMenuItem iconCls="icon_new" caption="增加" onClick="mainWindow.setTitle('新增');&#xA;mainWindow.show();&#xA;operateType = 'insert';&#xA;extResetAllControlsValue(&quot;mainWindow&quot;);&#xA;&#xA;SAVER_COD.setValue('{#sys.username#}');&#xA;MANAGER_COD.setValue('{#sys.username#}');&#xA;var d = new Date();&#xA;var year = d.getFullYear();&#xA;var month = d.getMonth() + 1; &#xA;month = month &lt; 10 ? (&quot;0&quot; + month) : month;&#xA;var dt = d.getDate();&#xA;dt = dt &lt; 10 ? (&quot;0&quot; + dt) : dt;&#xA;var today= year + &quot;-&quot; + month + &quot;-&quot; + dt;&#xA;PLAN_DTE.setValue(today);" name="mainadd"/><extMenuItem caption="编辑" iconCls="icon_edit" onClick="operateType = 'modify';&#xA;maingrid=Ext.getCmp(&quot;maingrid&quot;);&#xA;if (maingrid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一个有效的条目。');&#xA;	return;&#xA;}else{&#xA;&#xA;	var record = maingrid.getSelectionModel().getSelected();&#xA;	mainWindow.show();&#xA;	extSetAllControlsValueObj(mainWindow, record.data);&#xA;	RECP_NO1.setValue(record.get('RECP_NO'));&#xA;	PUR_NO1.setValue(record.get('PUR_NO'));&#xA;	console.info(record.get('PUR_NO'));&#xA;}" name="mainedit"/><extMenuItem iconCls="icon_delete" caption="删除" onClick="maingrid=Ext.getCmp(&quot;maingrid&quot;);&#xA;extGridDeleteConfirm(maingrid,&quot;PUR_NO&quot;,function(){&#xA;	maindelete();&#xA;});" name="maindel"/><extMenuItem name="startprocess" caption="发起流程" onClick="if (maingrid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一条数据。');&#xA;	return;&#xA;}else{	&#xA;	var record = maingrid.getSelectionModel().getSelected();&#xA;	ajaxStartProcess();&#xA;}" iconCls="icon_edit"/><extMenuItem caption="流程进度" name="showprocess" onClick="if (maingrid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一条数据。');&#xA;	return;&#xA;}else{	&#xA;	var record = maingrid.getSelectionModel().getSelected();&#xA;	var wfstatus=record.data.WF_STATUE;&#xA;	if(wfstatus==1){&#xA;		Get('image').src='/PartManager/modelFlowImage_getProcessTask.do?processinstid='+record.data.processinstid;&#xA;		var  wheresql=&quot; where  procinstid='&quot;+record.data.processinstid+&quot;' &quot;;&#xA;		selectprocess.baseParams.whereSql = wheresql;&#xA;		selectprocess.load({params:{start:0,limit:30}});&#xA;&#xA;		detailselect.baseParams.whereSql=&quot; where RECP_NO = '&quot;+record.data.RECP_NO+&quot;'&quot;;&#xA;		detailselect.load({params:{start:0,limit:30}});&#xA;&#xA;		OF_NO1.setValue(record.data.OF_NO);&#xA;		PUR_NO1.setValue(record.data.PUR_NO);&#xA;		INDEPOT_DTE1.setValue(record.data.INDEPOT_DTE);&#xA;		STORAGE_COD1.setValue(record.data.STORAGE_COD);&#xA;		REMARKS2.setValue(record.data.REMARKS);&#xA;		STORAGE_NAM1.setValue(record.data.STORAGE_NAM);&#xA;		MANAGER_COD1.setValue(record.data.MANAGER_COD);&#xA;		COMPUTER_COD1.setValue(record.data.COMPUTER_COD);&#xA;		SAVER_COD1.setValue(record.data.SAVER_COD);&#xA;		BUYER_COD1.setValue(record.data.BUYER_COD);&#xA;		PARTS_TYPE2.setValue(record.data.PARTS_TYPE2);&#xA;		IN_MOD1.setValue(record.data.IN_MOD);&#xA;		FETCHMODE_TXT1.setValue(record.data.FETCHMODE_TXT);&#xA;		PAYKIND_TYP1.setValue(record.data.PAYKIND_TYP);&#xA;		PLAN_DTE1.setValue(record.data.PLAN_DTE);&#xA;		RECP_NO11.setValue(record.data.RECP_NO1);&#xA;		is_contract.setValue(record.data.is_contract1);&#xA;	&#xA;		processViewWindow.show();&#xA;&#xA;	}else{&#xA;		extShowWarning('尚未发起审批。');&#xA;	}&#xA;}" iconCls="icon_edit"/></extMenu><extMenu name="detailmenu"><extLabel name="C_PARTS_NAM_toolbar1" caption="物料名称"/><extTextField name="partsName" width="100"/><extLabel caption="物料编码" name="PARTS_COD_TOOL"/><extTextField name="partsCod" width="100"/><extMenuItem name="detailsearch" caption="查询" iconCls="icon_property" onClick="var partscode= partsCod.getValue()==null?'':partsCod.getValue();&#xA;var partsname =partsName.getValue()==null?'':partsName.getValue();&#xA;var record = maingrid.getSelectionModel().getSelected();&#xA;&#xA;detailselect.baseParams.whereSql=&quot; where PARTS_COD like '%&quot;+partscode+&quot;%' and C_PARTS_NAM like '%&quot;+partsname+&quot;%' and RECP_NO like '%&quot;+record.get('RECP_NO')+&quot;%' &quot;;&#xA;detailselect.load({params:{start:0,limit:30}});"/><extMenuItem name="detailadd" caption="增加" onClick="detailWindow.setTitle('新增');&#xA;detailWindow.show();&#xA;operateType = 'insert';&#xA;extResetAllControlsValue(&quot;detailWindow&quot;);&#xA;&#xA;var record = maingrid.getSelectionModel().getSelected();&#xA;&#xA;RECP_NO.setValue(record.get('RECP_NO'));&#xA;PURCH_NO.setValue(record.get('PURCH_NO'));&#xA;IS_TAX.setValue(1);&#xA;tax_rate.setValue(17);" iconCls="icon_new"/><extMenuItem name="detaildel" caption="删除" iconCls="icon_delete" onClick="detailgrid=Ext.getCmp(&quot;detailgrid&quot;);&#xA;extGridDeleteConfirm(detailgrid,&quot;C_PARTS_NAM&quot;,function(){&#xA;	detaildeleted();&#xA;});"/><extMenuItem name="detailedit" caption="修改" iconCls="icon_edit" onClick="operateType = 'modify';&#xA;var sm = detailgrid.getSelectionModel();&#xA;var celIndex = sm.getSelectedCell();&#xA;var record = detailgrid.getStore().getAt(celIndex [0]);&#xA;&#xA; &#xA;		detailWindow.show();&#xA;	extSetAllControlsValueObj(detailWindow, record.data);&#xA;	PARTS_TYPE1.setValue(record.get('PARTS_TYPE'));&#xA;	REMARKS1.setValue(record.get('REMARKS'));"/><extMenuItem name="menuItem" caption="保存" iconCls="icon_save" onClick="mulGridSave();"/></extMenu></folder><folder name="PartCodPackage"><extStore name="storeSuppli" url="main?action=webbuilder/application/partmanager/common/SuppliSelect.xwl"/><extStore name="partCodSelect" url="main?action=webbuilder/application/partmanager/common/partCodeStore.xwl" autoLoad="false"/><extScript name="extScript" extHeader="function extInsertRecordWt(store, index) {&#xA;	var fields = store.fields.items;&#xA;	var meta = Ext.data.Record.create(fields);&#xA;	var i, j = fields.length;&#xA;	var data = {};&#xA;&#xA;	for (i = 0; i &lt; j; i++)&#xA;		data[fields[i].name] = &quot;&quot;;&#xA;	var record = new meta(data);&#xA;	if (store.modified.indexOf(record) == -1)&#xA;		store.modified.push(record);&#xA;	if (index == null)&#xA;		store.add(record);&#xA;	else&#xA;		store.insert(index, record);&#xA;	return record;&#xA;}&#xA;function setPartCod()    &#xA;{&#xA;if (maingrid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一个有效的条目。');&#xA;	return;&#xA;}&#xA;var record = maingrid.getSelectionModel().getSelected();&#xA;&#xA;&#xA;var Temprows =  gridPartCod.getSelectionModel().getSelections();&#xA;     for (var ii = 0; ii &lt; Temprows.length; ii++){&#xA;		 tempRow=Temprows[ii];&#xA;                var r = extInsertRecordWt(detailselect,ii );&#xA;                r.set(&quot;PURCH_NO&quot;,record.get('OF_NO'));&#xA;		r.set(&quot;PARTS_COD&quot;,tempRow.data.PARTS_COD);&#xA;		r.set(&quot;RECP_NO&quot;,record.get('RECP_NO'));&#xA;		r.set(&quot;C_PARTS_NAM&quot;,tempRow.data.C_PARTS_NAM);&#xA;		r.set(&quot;STAND_TXT&quot;,tempRow.data.STAND_TXT);&#xA;		r.set(&quot;SUPPLIER_NAM&quot;,record.get(&quot;SUPPLIER_NAM&quot;));&#xA;	 	r.set(&quot;PUR_TXT&quot;,record.get(&quot;PUR_TXT&quot;));&#xA; r.set(&quot;IS_TAX&quot;,&quot;是&quot;);&#xA; r.set(&quot;TAX_RATE&quot;,&quot;0.17&quot;);&#xA;	 	r.set(&quot;MIN_UNIT&quot;,tempRow.data.MIN_UNIT);&#xA;	 &#xA;     }&#xA;}"/><extMenu name="menuPartCod"><extLabel caption="名称" name="partsNametool"/><extTextField name="partsName1" width="80"/><extLabel name="extLabel" caption="供应商"/><extComboBox mode="local" width="100" name="SUPPLIER_COD1" store="storeSuppli" displayField="RNAME" valueField="RNAME" pageSize="30" onSelect="SUPPLIER_COD.setValue(this.value.split('/')[1]);" listWidth="150"/><extMenuItem name="search" caption="查询" iconCls="icon_property" onClick="var partscode=SUPPLIER_COD1.getValue()==null?'':SUPPLIER_COD1.getValue();&#xA;var partsname =partsName1.getValue()==null?'':partsName1.getValue();&#xA;partCodSelect.baseParams.whereSql=&quot; where SUPPLIER_NAM like  '%&quot;+partscode+&quot;%' and C_PARTS_NAM like '%&quot;+partsname+&quot;%'&quot;;&#xA;partCodSelect.load({params:{start:0,limit:100}});"/><extMenuItem name="menuItem1" caption="清空" iconCls="icon_delete" onClick="partsName1.setValue('');&#xA;SUPPLIER_COD.setValue('');"/><extMenuItem name="edit" iconCls="icon_ok" onClick="setPartCod();" caption="确认"/></extMenu><extColumnModel name="cmPartCod"><extScript name="extScript1" extHeader="new Ext.grid.CheckboxSelectionModel()"/><extColumn name="_PARTS_TYPE1" width="100" align="center" fieldName="PARTS_TYPE" caption="类型"/><extColumn name="_PARTS_COD1" fieldName="PARTS_COD" caption="代码"/><extColumn name="_C_PARTS_NAM1" fieldName="C_PARTS_NAM" caption="名称"/><extColumn width="80" name="_STAND_TXT1" fieldName="STAND_TXT" caption="型号"/><extColumn width="80" name="_STAND_UNIT" align="center" fieldName="STAND_UNIT" caption="标准单位"/><extColumn width="80" name="_MIN_UNIT" fieldName="MIN_UNIT" caption="最小单位"/><extColumn name="_STAND_CHANGE" fieldName="STAND_CHANGE" caption="转换率"/><extColumn width="60" name="_STORE_NUM" fieldName="STORE_NUM" caption="数量"/><extColumn width="80" name="_MIN_NUM" fieldName="MIN_NUM" caption="最小保有量"/><extColumn renderer="if(value=='0')&#xA;return '否';&#xA;else if(value=='1')&#xA;return '是';" name="_SUPPLIER_NAM" fieldName="SUPPLIER_NAM" caption="供应商名称"/></extColumnModel><extAjax name="mulGridSave" url="main?action=webbuilder/application/partmanager/tPartsIn/store/mulGridSave.xwl" onSuccess="extShowMessage('新增成功！');extCall(detailsearch);detailWindow.hide();" onFailure="var s = response.responseText;&#xA;extShowExcept(s);" out="detailgrid"/></folder><extViewPort name="viewPort" layout="border">
		<extGrid name="maingrid" bbar="" columnsModel="mainModel" autoExpandColumn="" onRowDblClick="extCall(editMenu);" downloadAll="true" store="mainselect" loadStore="true" region="north" width="100%" height="300" tbar="mainmenu" onRowClick="var record = maingrid.getSelectionModel().getSelected();&#xA;detailselect.baseParams.recpNo=record.data.RECP_NO;&#xA;detailselect.load({params:{start:0,limit:30}});" pageSize="10"/><extPanel name="panel" border="false" region="center" layout="border" height="400"><extPanel name="panel2" border="false" region="center" split="true" layout="border" height="400"><extGrid name="detailgrid" store="detailselect" columnsModel="detailModel" tbar="detailmenu" width="100%" loadStore="false" region="center" height="300" pageSize="30" canEdit="true" submitMode="modified" clicksToEdit="1"/></extPanel><extPanel name="panel1" border="false" region="east" collapsible="true" collapsed="true" split="true" layout="border" height="400" width="40%" caption="物料代码选择"><extGrid name="gridPartCod" region="center" split="true" columnsModel="cmPartCod" height="400" pageSize="100" tbar="menuPartCod" store="partCodSelect"/></extPanel></extPanel></extViewPort>
</body>
