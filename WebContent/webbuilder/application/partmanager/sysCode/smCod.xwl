<?xml version="1.0" encoding="utf-8"?>
<body name="body" compact="true" class="sys_normal" headerScript="var operateType;&#xA;var operateType1;" caption="系统代码维护">
	<folder name="folder"><extStore name="store" onAfterLoad="grid.getSelectionModel().selectRow(0); &#xA;var len=grid.getStore().getCount();&#xA;if(len&gt;0){&#xA;operateType = 'modify';&#xA; var record = grid.getSelectionModel().getSelected();&#xA;extSetAllControlsValueObj(extWindow, record.data);&#xA;OLD_SYS_COD.setValue(record.get('SYS_COD'));&#xA;OLD_C_MEAN_STR.setValue(record.get('C_MEAN_STR'));&#xA;OLD_E_MEAN_STR.setValue(record.get('E_MEAN_STR'));&#xA;}" url="main?action=webbuilder/application/partmanager/sysCode/smCOd/select.xwl"/><extAjax name="deleteAjax" out="grid" onSuccess="extRemoveGridSelection(grid);&#xA;extResetAllControlsValue('extWindow');" url="main?action=webbuilder/application/partmanager/sysCode/smCOd/delete.xwl"/><extAjax name="insertAjax" out="extWindow" onFailure="var s = response.responseText;&#xA;extShowExcept(s);" onSuccess="extShowMessage('新增成功！');extCall(findMenu);" url="main?action=webbuilder/application/partmanager/sysCode/smCOd/insert.xwl"/><extAjax name="updatetAjax" out="extWindow" onFailure="var s = response.responseText;&#xA;extShowExcept(s);" onSuccess="extShowMessage('修改成功！');extCall(findMenu);" url="main?action=webbuilder/application/partmanager/sysCode/smCOd/update.xwl"/></folder><extMenu name="menu" style="" bodyStyle="" autoShow="false"><extLabel name="extLabel" caption="类别名称："/><extTextField onBlur="control.setValue(control.getValue().toUpperCase());" name="fldNam"/><extTextField name="fldId" hidden="true"/><extLabel name="extLabel10" caption="中文名称："/><extTextField onBlur="control.setValue(control.getValue().toUpperCase());" name="cMeanStr"/><extMenuItem caption="查询" iconCls="icon_find" onClick="var  whereSql=&quot; 1=1 &quot;;&#xA;if(fldNam.getValue()!=''){&#xA;whereSql+=  &quot;  and  FLD_NAM like  '%&quot;+fldNam.getValue()+&quot;%'&quot;;&#xA;}&#xA;if(cMeanStr.getValue()!=''){&#xA;whereSql+=  &quot;  and C_MEAN_STR like  '%&quot;+cMeanStr.getValue()+&quot;%'&quot;;&#xA;}&#xA;&#xA;store.baseParams.WhereSql =whereSql;&#xA;store.load({params:{start:0,limit:30}});" name="findMenu"/><extMenuItem caption="新增" iconCls="icon_new" onClick="operateType = 'insert';&#xA;extResetAllControlsValue('extWindow');&#xA;operateType = 'insert';&#xA;FLD_ID.setValue(fldId.getValue());&#xA;FLD_NAM.setValue(fldNam.getValue());" name="addMenu"/><extMenuItem caption="修改" iconCls="icon_edit" onClick="operateType = 'modify';&#xA;if (grid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一个有效的条目。');&#xA;	return;&#xA;}else{&#xA;	extWindow.show();&#xA;var record = grid.getSelectionModel().getSelected();	&#xA;extSetAllControlsValueObj(extWindow, record.data);&#xA;OLD_SYS_COD.setValue(record.get('SYS_COD'));&#xA;OLD_C_MEAN_STR.setValue(record.get('C_MEAN_STR'));&#xA;OLD_E_MEAN_STR.setValue(record.get('E_MEAN_STR'));&#xA;extSetDisabled(FLD_ID,true);&#xA;extSetDisabled(FLD_NAM,true);&#xA;}" name="editMenu" hidden="true"/><extMenuItem caption="删除" iconCls="icon_delete" onClick="extGridDeleteConfirm(grid,'C_MEAN_STR',function(){&#xA;	deleteAjax();&#xA;});" name="delMenu"/><extMenuItem caption="保存" name="saveMenu" onClick="if (!extVerifyAllControls('extWindow')) return; &#xA;&#xA;if(operateType=='insert'){&#xA;	insertAjax();&#xA;&#xA;}&#xA;if(operateType=='modify'){&#xA;	updatetAjax();&#xA;	&#xA;}" iconCls="icon_save"/></extMenu><extColumnModel name="columnModel"><extColumn name="column8" caption="序号" type="rowNum"/><extColumn name="column1" fieldName="FLD_ID" caption="类别代码" width="100"/><extColumn name="column2" width="120" fieldName="FLD_NAM" caption="类别名称"/><extColumn name="column" fieldName="SYS_COD" caption="代码" width="80"/><extColumn name="column3" fieldName="C_MEAN_STR" caption="名称" width="150"/><extColumn name="column7" fieldName="REMARKS" caption="备注" width="200"/></extColumnModel><extViewPort name="viewPort" width="500" height="350" layout="border"><extPanel name="panel1" border="false" region="west" width="200" layout="fit" height="100%" caption="代码类别树"><extTree name="tree" autoScroll="true" onClick="Ext.getCmp(&quot;fldNam&quot;).setValue(node.text);&#xA;Ext.getCmp(&quot;fldId&quot;).setValue(node.id);&#xA;if(node.id == '1' || node.id == '2'){ extSetDisabled( UNIT_CHANGE,false);}else{extSetDisabled( UNIT_CHANGE,true);}&#xA; extCall(findMenu);&#xA;p=node;" remoteUrl="main?action=webbuilder/application/partmanager/sysCode/smCOd/jsonQuery.xwl" onBeforeLoad="control.baseParams.id=node.id;"/></extPanel><extPanel name="panel" border="false" layout="border" tbar="menu" left="0" top="10" width="1030" region="center" height="300"><extGrid name="grid" bbar="" autoExpandColumn="" downloadAll="true" pageSize="30" columnsModel="columnModel" store="store" loadStore="false" onCellClick="extCall(editMenu);" region="center"/><extPanel border="false" layout="absolute" width="499" height="199" name="extWindow" region="south" frame="true"><extLabel name="extLabel1" left="10" top="15" width="80" html="&lt;font color='red'&gt;*&lt;/font&gt;类别代码："/><extTextField left="95" top="10" width="120" disabled="true" name="FLD_ID" allowBlank="false" vtype="alphanum" maxLength="20"/><extLabel name="extLabel2" left="15" top="45" width="75" html="&lt;font color='red'&gt;*&lt;/font&gt;代码："/><extLabel name="extLabel8" left="225" top="15" width="70" html="&lt;font color='red'&gt;*&lt;/font&gt;类别名称："/><extTextField left="300" top="10" width="120" name="FLD_NAM" maxLength="10" allowBlank="false" disabled="true"/><extTextField left="95" top="40" width="120" name="SYS_COD" maxLength="10" allowBlank="false"/><extLabel name="extLabel3" left="215" top="45" width="80" html="&lt;font color='red'&gt;*&lt;/font&gt;中文名称："/><extTextField left="300" top="40" width="120" name="C_MEAN_STR" maxLength="100" allowBlank="false"/><extLabel name="extLabel5" left="35" top="75" width="55" caption="备注："/><extTextField left="95" top="70" width="325" name="REMARKS" inputType="textArea" height="85"/><extTextField name="OLD_SYS_COD" hidden="true" left="510" top="45" width="120"/><extTextField name="OLD_C_MEAN_STR" hidden="true" left="510" top="75" width="120"/><extTextField name="CODE_ID" hidden="true" left="510" top="105" width="120"/><extTextField name="OLD_E_MEAN_STR" hidden="true" left="510" top="135" width="120"/><extLabel left="10" top="160" width="75" name="sds" caption="最小单位："/><extComboBox mode="local" name="UNIT_CHANGE" mapKey="YN" displayField="KEY_TEXT" valueField="KEY_TEXT" left="95" top="160" width="145"/></extPanel></extPanel></extViewPort><extScript name="extScript" extLast="extCall(addMenu);"/></body>
