<?xml version="1.0" encoding="utf-8"?>
<body name="body" class="sys_normal" headerScript="var operateType,p;" caption="物料类别代码">
	<folder name="datasource"><extAjax onSuccess="extShowMessage('保存成功');extCall(findMenu);p.reload();" name="insertAjax" out="panel3,menu" onFailure="var s = response.responseText;&#xA;extShowExcept(s);" url="main?action=webbuilder/application/partmanager/partDevic/partTypeCode/insert.xwl"/><extAjax onSuccess="extShowMessage('修改成功');&#xA;var r=extUpdateFromControl(grid,'panel3');&#xA;&#xA;r.commit();" name="updateAjax" out="extWindow" onFailure="var s = response.responseText;&#xA;extShowExcept(s);" url="main?action=webbuilder/application/partmanager/partDevic/partTypeCode/update.xwl"/><extAjax onSuccess="extRemoveGridSelection(grid);&#xA;extResetAllControlsValue('panel3');&#xA;p.reload();" out="grid,menu" name="ajaxdelete" onFailure="var s = response.responseText;&#xA;extShowExcept(s);" url="main?action=webbuilder/application/partmanager/partDevic/partTypeCode/delete.xwl"/><extStore name="store" onAfterLoad="grid.getSelectionModel().selectRow(0);  &#xA;	var len=grid.getStore().getCount();&#xA;if(len&gt;0){&#xA;operateType = 'modify';&#xA;	var record = grid.getSelectionModel().getSelected();&#xA;&#xA;	extSetAllControlsValueObj(panel3, record.data);&#xA;	OLD_PARTS_TYPE.setValue(record.get('PARTS_TYPE'));&#xA;}" url="main?action=webbuilder/application/partmanager/partDevic/partTypeCode/select.xwl"/></folder><extMenu name="menu"><extLabel name="extLabel81" caption="名称："/><extTextField name="pmNam"/><extMenuItem caption="查询" iconCls="icon_find" name="findMenu" onClick="store.baseParams=extGetAllControlsValue('menu');&#xA;store.load({params:{start:0,limit:30}});"/><extMenuItem name="addMenu" iconCls="icon_new" onClick="extResetAllControlsValue('panel3');&#xA;&#xA;if(Ext.getCmp(&quot;parCod&quot;).getValue()=='')&#xA;{&#xA;	extShowMessage(&quot;请选择树节点&quot;);&#xA;	return;&#xA;}&#xA;else&#xA;{	operateType = 'insert';&#xA;	PARENT_ID.setValue(Ext.getCmp(&quot;parCod&quot;).getValue());&#xA;        extWindow.show();&#xA;}" caption="新增"/><extMenuItem name="edit" caption="编辑" iconCls="icon_edit" onClick="if (grid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一条数据。');&#xA;	return;&#xA;}else{&#xA;	var record = grid.getSelectionModel().getSelected();&#xA;	extSetAllControlsValueObj(panel3, record.data);&#xA;	OLD_PARTS_TYPE.setValue(record.get('PARTS_TYPE'));&#xA;        operateType = 'modify';&#xA;	extWindow.show();	&#xA;}"/><extMenuItem name="del" caption="删除" iconCls="icon_delete" onClick="if (grid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一条数据。');&#xA;	return;&#xA;}else{&#xA;var record = grid.getSelectionModel().getSelected();&#xA;extGridDeleteConfirm(grid,&quot;PARTS_TYPE&quot;,ajaxdelete);&#xA;		&#xA;}"/><extTextField hidden="true" name="parCod"/></extMenu><extColumnModel name="columnModel"><extColumn caption="序号" type="rowNum" name="rownum"/><extColumn align="center" caption="主键" fieldName="TYPE_ID" hidden="true" name="TYPE_IDs"/><extColumn name="PARTS_TYPEs" fieldName="PARTS_TYPE" caption="类别名称"/><extColumn caption="类别" fieldName="DATA_TYP" name="DATA_TYPs"/><extColumn caption="备注" fieldName="REMARKS" name="REMARKSs"/></extColumnModel><extWindow name="extWindow" closeAction="hide" frame="true" width="500" height="195" layout="absolute" onOk="if (!extVerifyAllControls('panel3')) return; &#xA;extShowMessage(operateType );&#xA;if(operateType == 'modify'){&#xA;  updateAjax();&#xA;}&#xA;else if(operateType == 'insert'){&#xA;  insertAjax()&#xA;}&#xA;else&#xA;{&#xA;	extShowMessage('请选择是新增还是修改！');&#xA;	reutrn;&#xA;}&#xA;extWindow.hide();" caption="编辑"><extPanel name="panel3" border="false" layout="absolute" width="454" region="center" frame="true" height="131"><extLabel name="extLabel" left="15" top="160" width="65" caption="代码："/><extTextField left="250" top="110" width="70" disabled="true" name="TYPE_ID" hidden="true"/><extLabel name="extLabel11" left="180" top="165" width="80" caption="父节点："/><extTextField left="270" top="160" width="120" disabled="true" name="PARENT_ID" hidden="true"/><extLabel name="extLabel3" left="10" top="10" width="75" html="&lt;font  color='red'&gt;*&lt;/font&gt;类别名称："/><extTextField left="90" top="5" width="120" maxLength="25" allowBlank="false" name="PARTS_TYPE"/><extLabel name="extLabel2" left="25" top="40" width="55" caption="备注："/><extTextField left="90" top="30" width="345" inputType="textArea" height="70" name="REMARKS" maxLength="100"/><extTextField left="485" top="150" width="120" hidden="true" name="OLD_PARTS_TYPE"/><extComboBox mode="local" left="295" top="5" width="145" name="DATA_TYP" mapKey="DATA_TYP" displayField="KEY_TEXT" valueField="KEY_TEXT"/><extLabel name="extLabel1" left="235" top="10" width="55" caption="类别"/></extPanel></extWindow><extViewPort name="viewPort" layout="border"><extPanel name="panel" border="false" region="west" width="200" layout="fit" height="100%" caption="代码树"><extTree name="tree" autoScroll="true" onBeforeLoad="control.baseParams.id=node.id;" onClick="Ext.getCmp(&quot;parCod&quot;).setValue(node.id);&#xA;Ext.getCmp(&quot;pmNam&quot;).setValue(node.text);&#xA; extCall(findMenu);&#xA;p=node;" remoteUrl="main?action=webbuilder/application/partmanager/partDevic/partTypeCode/jsonQuery.xwl"/></extPanel><extPanel name="panel1" border="false" region="center" layout="border" tbar="menu" frame="true" hideMode="display"><extPanel name="panel2" border="false" layout="fit" region="center" height="200"><extGrid name="grid" columnsModel="columnModel" pageSize="30" store="store" loadStore="false" onRowDblClick="extCall(edit);"/></extPanel></extPanel></extViewPort></body>
