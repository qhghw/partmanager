<?xml version="1.0" encoding="utf-8"?>
<body name="body" class="sys_normal" headerScript="var partsType;">
	<folder name="supplier"><folder name="store"><extStore name="select" url="main?action=webbuilder/application/partmanager/partCode/store/select.xwl" autoLoad="false"/><extAjax out="extWindow" name="save" url="main?action=webbuilder/application/partmanager/partCode/store/save.xwl" onFailure="var s = response.responseText;&#xA;extShowExcept(s);" onSuccess="extShowMessage('新增成功！');extCall(search);extWindow.hide();"/><extAjax url="main?action=webbuilder/application/common/getSql.xwl" out="extWindow" onSuccess="alert(&quot;保存成功！&quot;);" onFailure="alert(&quot;保存失败&quot;);" name="getSql"/><extAjax name="update" url="main?action=webbuilder/application/partmanager/partCode/store/update.xwl" out="extWindow" onSuccess="extShowMessage('新增成功！');extCall(search);extWindow.hide();" onFailure="var s = response.responseText;&#xA;extShowExcept(s);"/><extAjax out="grid" onSuccess="extRemoveGridSelection(grid);" name="deleted" url="main?action=webbuilder/application/partmanager/partCode/store/deleted.xwl"/><method name="getOrg" methodName="com.xuelang.partmanage.MultipleTree.getOrg"/><extStore name="selectStorage" url="main?action=webbuilder/application/partmanager/wasteApply/wasteApply/selectStorage.xwl"/><extStore name="getDwStore" baseParams="fldId:'1'" url="main?action=webbuilder/application/partmanager/common/CodeSelect.xwl"/><method name="method" methodName="com.xuelang.partmanage.MultipleTree.getPartsTypeTree"/><extStore name="storeSuppli" url="main?action=webbuilder/application/partmanager/common/SuppliSelect.xwl"/></folder><folder name="column"><extColumnModel name="columnModel"><extColumn name="_PARTS_ID" width="100" align="center" fieldName="PARTS_ID" caption="物料主键" hidden="true"/><extColumn name="_PARTS_TYPE" width="100" align="center" fieldName="PARTS_TYPE" caption="类型"/><extColumn name="_PARTS_COD" fieldName="PARTS_COD" caption="代码"/><extColumn name="_C_PARTS_NAM" fieldName="C_PARTS_NAM" caption="中文名"/><extColumn name="_E_PARTS_NAM" renderer="if(value=='0')&#xA;return '否';&#xA;else if(value=='1')&#xA;return '是';" fieldName="E_PARTS_NAM" caption="英文名称"/><extColumn width="80" name="_STAND_TXT" fieldName="STAND_TXT" caption="型号"/><extColumn width="80" name="_STAND_UNIT" align="center" fieldName="STAND_UNIT" caption="标准单位"/><extColumn width="80" name="_MIN_UNIT" fieldName="MIN_UNIT" caption="最小单位"/><extColumn name="_STAND_CHANGE" fieldName="STAND_CHANGE" caption="转换率"/><extColumn width="60" name="_STORE_NUM" fieldName="STORE_NUM" caption="数量"/><extColumn width="80" name="_MIN_NUM" fieldName="MIN_NUM" caption="最小保有量"/><extColumn name="_IS_OLD" fieldName="IS_OLD" caption="是否旧件"/><extColumn renderer="if(value=='0')&#xA;return '否';&#xA;else if(value=='1')&#xA;return '是';" name="_SUPPLIER_NAM" fieldName="SUPPLIER_NAM" caption="仓库名称"/><extColumn width="80" name="_RESP_NAM" fieldName="RESP_NAM" caption="责任人"/><extColumn width="60" name="_RESP_DEPT" fieldName="RESP_DEPT" caption="责任部门"/><extColumn name="_RECORD_TIM" fieldName="RECORD_TIM" caption="录入时间"/><extColumn name="_RECORD_MAN" fieldName="RECORD_MAN" caption="录入人"/><extColumn name="_DEPT_COD" fieldName="DEPT_COD" caption="所属部门"/><extColumn fieldName="USERID" name="_USERID" caption="用户代码"/><extColumn name="_REMARKS" fieldName="REMARKS" caption="备注"/></extColumnModel></folder><folder name="menu"><extMenu name="suppliermenu"><extLabel caption="物料编号" name="PARTS_CODE_toolbar"/><extTextField name="partsCode" width="100"/><extLabel caption="物料名称" name="partsNametool"/><extTextField name="partsName" width="100"/><extMenuItem name="search" caption="查询" iconCls="icon_property" onClick="var partscode=partsCode.getValue()==null?'':partsCode.getValue();&#xA;var partsname =partsName.getValue()==null?'':partsName.getValue();&#xA;select.baseParams.whereSql=&quot; where PARTS_COD like '%&quot;+partscode+&quot;%' and C_PARTS_NAM like '%&quot;+partsname+&quot;%'&quot;;&#xA;select.load({params:{start:0,limit:30}});"/><extMenuItem name="add" caption="增加" onClick="extWindow.setTitle('新增');&#xA;extWindow.show();&#xA;operateType = 'insert';&#xA;extResetAllControlsValue(&quot;extWindow&quot;);&#xA;PARTS_TYPE.setValue(partsType);&#xA;RESP_DEPT.setValue('{#sys.deptCode#}');&#xA;RESP_NAM.setValue('{#sys.username#}');" iconCls="icon_new"/><extMenuItem name="del" caption="删除" iconCls="icon_delete" onClick="grid=Ext.getCmp(&quot;grid&quot;);&#xA;extGridDeleteConfirm(grid,&quot;C_PARTS_NAM&quot;,function(){&#xA;	deleted();&#xA;});"/><extMenuItem name="edit" caption="修改" iconCls="icon_edit" onClick="operateType = 'modify';&#xA;grid=Ext.getCmp(&quot;grid&quot;);&#xA;if (grid.getSelectionModel().getSelections().length != 1)&#xA;{&#xA;	extShowWarning('请选择一个有效的条目。');&#xA;	return;&#xA;}else{&#xA;	var record = grid.getSelectionModel().getSelected();&#xA;		extWindow.show();&#xA;	extSetAllControlsValueObj(extWindow, record.data);&#xA;&#xA;}"/></extMenu></folder><folder name="script"/><folder name="window"><extWindow name="extWindow" closeAction="hide" frame="true" width="697" height="291" layout="absolute" onOk="if (!extVerifyAllControls('extWindow')) return;&#xA;if (operateType == 'insert'){&#xA;save();&#xA;} else update();" onHide="extResetAllControlsValue('extWindow');" autoScroll="true" caption="物料信息维护"><extLabel left="225" top="15" width="75" caption="物料中文名：" name="C_PARTS_NAM_LAB"/><extTextField left="305" top="10" width="120" name="C_PARTS_NAM"/><extLabel left="435" top="15" width="75" caption="物料英文名：" name="E_PARTS_NAM_LAB"/><extTextField left="525" top="10" width="120" name="E_PARTS_NAM"/><extLabel left="230" top="45" width="65" caption="型号：" name="STAND_TXT_LAB"/><extTextField left="305" top="40" width="120" name="STAND_TXT"/><extLabel left="440" top="45" width="75" caption="标准单位：" name="STAND_UNIT_LAB"/><extLabel left="225" top="70" width="70" caption="转换率：" name="STAND_CHANGE_LAB"/><extLabel left="15" top="70" width="65" caption="最小单位：" name="MIN_UNIT_LAB"/><extLabel left="435" top="75" width="75" caption="最小保有量：" name="MIN_NUM_LAB"/><extLabel left="435" top="105" width="65" caption="供应商：" name="SUPPLIER_NAM_LAB"/><extLabel left="10" top="100" width="70" caption="责任人：" name="RESP_NAM_LAB"/><extLabel left="10" top="135" width="70" caption="备注：" name="REMARKS_LAB"/><extTextField left="95" top="130" width="550" inputType="textArea" height="70" maxLength="500" name="REMARKS"/><extLabel left="225" top="100" width="80" caption="责任部门：" name="RESP_DEPT_LAB"/><extLabel left="15" top="10" width="70" caption="物料代码：" name="PARTS_COD_LAB"/><extTextField left="305" top="70" width="120" name="STAND_CHANGE"/><extTextField left="525" top="70" width="120" name="MIN_NUM"/><extTextField left="95" top="100" width="120" name="RESP_NAM" value="123123"/><extTextField left="95" top="10" width="120" name="PARTS_COD" disabled="true"/><extLabel left="15" top="40" width="70" name="PARTS_TYPE_LAB" caption="物料类型："/><extTextField left="100" top="225" width="120" name="PARTS_ID" hidden="true"/><extComboTree left="310" top="100" width="120" height="20" name="RESP_DEPT" data="{#orgTree#}" onClick="var text=node.text;&#xA;RESP_DEPT.setValue(text);&#xA;RESP_DEPT.collapse();"/><extComboBox mode="local" left="525" top="100" width="125" name="SUPPLIER_NAM" store="storeSuppli" displayField="RNAME" valueField="RNAME" onSelect="var storage_=this.value.split('/');&#xA;SUPPLIER_NAM.setValue(storage_[1]);" pageSize="20"/><extComboTree left="95" top="40" width="120" height="20" data="{#parttypeTree#}" onClick="var text=node.text;&#xA;PARTS_TYPE.setValue(text);PARTS_TYPE.collapse();" treeHeight="300" treeWidth="200" name="PARTS_TYPE"/><extComboBox mode="local" left="95" top="70" width="120" displayField="RNAME" valueField="RNAME" store="getDwStore" pageSize="10" name="MIN_UNIT"/><extComboBox mode="local" left="525" top="40" width="120" name="STAND_UNIT" displayField="RNAME" valueField="RNAME" store="getDwStore" pageSize="10"/></extWindow></folder></folder><extViewPort name="viewPort" layout="border"><extPanel name="treepanel" border="false" region="west" layout="fit" height="400" width="150"><extTree name="tree" autoScroll="true" remoteUrl="main?action=webbuilder/application/partmanager/partCode/store/jsonQuery.xwl" onBeforeLoad="control.baseParams.id=node.id;" onClick="var  whereSql=&quot;  WHERE  PARTS_TYPE='&quot;+node.text+&quot;' &quot;;&#xA;select.baseParams.WhereSql =whereSql;&#xA;select.load({params:{start:0,limit:30}});&#xA;p=node;&#xA;partsType=node.text;" region="east" width="200" split="true"/></extPanel><extPanel name="panel" border="false" region="center" height="500" layout="fit"><extGrid name="grid" store="select" pageSize="15" columnsModel="columnModel" tbar="suppliermenu" loadStore="true" region="center" height="500"/></extPanel></extViewPort></body>
